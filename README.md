# quartzctl

## Development

1. Install [devbox](https://www.jetify.com/devbox/docs/quickstart/)
2. Run `devbox shell`
3. Run `task build`, should see something similar to the following if everything is working

```console
❯ task build
task: [build] mkdir -p ./bin
task: [build] BUILD_VERSION=v0.2.5-11-g7c4377f-dirty BUILD_DATE=1734710181 goreleaser build --clean --snapshot --single-target --output ./bin/quartz
  • skipping validate...
  • cleaning distribution directory
  • loading environment variables
  • getting and validating git state
    • git state                                      commit=7c4377f1ecb2bcb6793dd9e384044f2fe7524bd6 branch=mage_replacement current_tag=v0.2.5 previous_tag=v0.2.4 dirty=true
    • pipe skipped                                   reason=disabled during snapshot mode
  • parsing tag
  • setting defaults
  • partial
  • snapshotting
    • building snapshot...                           version=0.2.5-SNAPSHOT-7c4377f
  • running before hooks
    • running                                        hook=go mod tidy
  • ensuring distribution directory
  • setting up metadata
  • writing release metadata
  • loading go mod information
  • build prerequisites
  • building binaries
    • partial build                                  match=target=linux_amd64_v1
    • building                                       binary=dist/quartz_linux_amd64_v1/quartz
  • writing artifacts metadata
  • copying binary to "./bin/quartz"
  • build succeeded after 3s
  • thanks for using goreleaser!
task: [build] ./bin/quartz --version

 Quartz v0.2.5-11-g7c4377f-dirty
 Build Date: 2024-12-20 15:56 UTC
```

## Environment variables

| Key | Description | Default | Required |
|-----|-------------|---------|----------|
| GITHUB_USERNAME | Github username for Jenkins and ArgoCD connections | "" | yes |
| GITHUB_TOKEN | Github PAT for Jenkins and ArgoCD connections | "" | yes |
| REGISTRY_USERNAME | Ironbank or alternate private registry username for Bigbang sourced images | "" | if `mirror.enabled = false` |
| REGISTRY_PASSWORD |Ironbank or alternate private registry password for Bigbang sourced images | "" | if `mirror.enabled = false` |
| REGISTRY_EMAIL | Ironbank or alternate private registry email for Bigbang sourced images | "" | if `mirror.enabled = false` |
| CLOUDFLARE_EMAIL | Cloudflare username/email for automated DNS and certificate management | "" | if `providers.dns = "cloudflare"` |
| CLOUDFLARE_API_TOKEN | Cloudflare password for automated DNS and certificate management | "" | if `providers.dns = "cloudflare"` |

## Configuration

The [quartz.yaml](./quartz.yaml) config file is necessary as the primary source of configuration values for a Quartz environment. The following
represents only the minimal config for an AWS deployment though many other fields are available to customize as needed. Please see [quartz-sample.yaml](./docs/quartz-sample.yaml) for a complete example.

```yaml

name: <my-quartz> # required, unique name of the environment

dns:
  zone: example.com # required, dns zone of the environment

aws:
  region: us-east-1 # required, AWS region for the cloud infrastructure

```

<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# quartz

```go
import "github.com/MetroStar/quartzctl/cmd/quartz"
```

## Index



# cmd

```go
import "github.com/MetroStar/quartzctl/internal/cmd"
```

## Index

- [Variables](<#variables>)
- [func AwsGetEksToken\(ctx context.Context, name string, region string\) error](<#AwsGetEksToken>)
- [func Banner\(\)](<#Banner>)
- [func ByCommandName\(a, b \*cli.Command\) int](<#ByCommandName>)
- [func Check\(ctx context.Context, p \*CommandParams\)](<#Check>)
- [func Clean\(ctx context.Context, refresh bool, p \*CommandParams\) error](<#Clean>)
- [func Cleanup\(ctx context.Context, p \*CommandParams\) error](<#Cleanup>)
- [func ClusterInfo\(ctx context.Context, p \*CommandParams\) error](<#ClusterInfo>)
- [func ClusterLogin\(ctx context.Context, path string, p \*CommandParams\) error](<#ClusterLogin>)
- [func Confirm\(ctx context.Context, msg string, p \*CommandParams\) error](<#Confirm>)
- [func Export\(ctx context.Context, p \*CommandParams\) error](<#Export>)
- [func ForceCleanup\(ctx context.Context, p \*CommandParams\) error](<#ForceCleanup>)
- [func Install\(ctx context.Context, p \*CommandParams\) error](<#Install>)
- [func NewCliCommand\(deps CliDependencies, p AppServiceParams\) \*cli.Command](<#NewCliCommand>)
- [func PrepareAccount\(ctx context.Context, p \*CommandParams\) error](<#PrepareAccount>)
- [func RefreshSecrets\(ctx context.Context, p \*CommandParams\) error](<#RefreshSecrets>)
- [func Render\(ctx context.Context, path string, p \*CommandParams\) error](<#Render>)
- [func Restart\(ctx context.Context, res string, ns string, name string, p \*CommandParams\) error](<#Restart>)
- [func RunAppService\(p AppServiceParams\)](<#RunAppService>)
- [func TfApply\(ctx context.Context, stage string, p \*CommandParams\) error](<#TfApply>)
- [func TfCreateBackend\(ctx context.Context, p \*CommandParams\) error](<#TfCreateBackend>)
- [func TfDestroy\(ctx context.Context, stage string, p \*CommandParams\) error](<#TfDestroy>)
- [func TfDestroyBackend\(ctx context.Context, p \*CommandParams\) error](<#TfDestroyBackend>)
- [func TfFormat\(ctx context.Context, stage string, p \*CommandParams\) error](<#TfFormat>)
- [func TfFormatAll\(ctx context.Context, p \*CommandParams\) error](<#TfFormatAll>)
- [func TfInit\(ctx context.Context, stage string, p \*CommandParams\) error](<#TfInit>)
- [func TfInitAll\(ctx context.Context, p \*CommandParams\) error](<#TfInitAll>)
- [func TfOutput\(ctx context.Context, stage string, p \*CommandParams\) error](<#TfOutput>)
- [func TfPlan\(ctx context.Context, stage string, p \*CommandParams\) error](<#TfPlan>)
- [func TfRefresh\(ctx context.Context, stage string, p \*CommandParams\) error](<#TfRefresh>)
- [func TfRefreshAll\(ctx context.Context, p \*CommandParams\) error](<#TfRefreshAll>)
- [func TfValidate\(ctx context.Context, stage string, p \*CommandParams\) \(int, error\)](<#TfValidate>)
- [func TfVersion\(ctx context.Context, p \*CommandParams\) error](<#TfVersion>)
- [func Version\(version string, buildDate string\)](<#Version>)
- [type AppService](<#AppService>)
  - [func NewAppService\(app \*cli.Command, sd fx.Shutdowner\) \*AppService](<#NewAppService>)
  - [func \(svc \*AppService\) Start\(args \[\]string\) error](<#AppService.Start>)
  - [func \(svc \*AppService\) Stop\(\) error](<#AppService.Stop>)
- [type AppServiceParams](<#AppServiceParams>)
- [type AwsCommandParams](<#AwsCommandParams>)
- [type AwsCommandResult](<#AwsCommandResult>)
  - [func NewGetEksTokenCommand\(\) AwsCommandResult](<#NewGetEksTokenCommand>)
- [type CliDependencies](<#CliDependencies>)
- [type CommandParams](<#CommandParams>)
  - [func NewCommandParams\(startTime time.Time\) \*CommandParams](<#NewCommandParams>)
  - [func \(p \*CommandParams\) Provider\(\) \*provider.ProviderFactory](<#CommandParams.Provider>)
  - [func \(p \*CommandParams\) SetConfig\(configFile string\)](<#CommandParams.SetConfig>)
  - [func \(p \*CommandParams\) SetSecrets\(secretsFile string\)](<#CommandParams.SetSecrets>)
  - [func \(p \*CommandParams\) Settings\(\) \*config.Settings](<#CommandParams.Settings>)
- [type RootCommandParams](<#RootCommandParams>)
- [type RootCommandResult](<#RootCommandResult>)
  - [func NewRootAwsCommand\(cmds AwsCommandParams\) RootCommandResult](<#NewRootAwsCommand>)
  - [func NewRootCheckCommand\(p \*CommandParams\) RootCommandResult](<#NewRootCheckCommand>)
  - [func NewRootCleanCommand\(p \*CommandParams\) RootCommandResult](<#NewRootCleanCommand>)
  - [func NewRootExportCommand\(p \*CommandParams\) RootCommandResult](<#NewRootExportCommand>)
  - [func NewRootInfoCommand\(p \*CommandParams\) RootCommandResult](<#NewRootInfoCommand>)
  - [func NewRootInstallCommand\(p \*CommandParams\) RootCommandResult](<#NewRootInstallCommand>)
  - [func NewRootInternalCommand\(p \*CommandParams\) RootCommandResult](<#NewRootInternalCommand>)
  - [func NewRootLoginCommand\(p \*CommandParams\) RootCommandResult](<#NewRootLoginCommand>)
  - [func NewRootRefreshSecretsCommand\(p \*CommandParams\) RootCommandResult](<#NewRootRefreshSecretsCommand>)
  - [func NewRootRenderCommand\(p \*CommandParams\) RootCommandResult](<#NewRootRenderCommand>)
  - [func NewRootRestartCommand\(p \*CommandParams\) RootCommandResult](<#NewRootRestartCommand>)
  - [func NewRootTerraformCommand\(cmds TfCommandParams, p \*CommandParams\) RootCommandResult](<#NewRootTerraformCommand>)
- [type TfCommandParams](<#TfCommandParams>)
- [type TfCommandResult](<#TfCommandResult>)
  - [func NewTfApplyCommand\(p \*CommandParams\) TfCommandResult](<#NewTfApplyCommand>)
  - [func NewTfDestroyCommand\(p \*CommandParams\) TfCommandResult](<#NewTfDestroyCommand>)
  - [func NewTfFormatAllCommand\(p \*CommandParams\) TfCommandResult](<#NewTfFormatAllCommand>)
  - [func NewTfFormatCommand\(p \*CommandParams\) TfCommandResult](<#NewTfFormatCommand>)
  - [func NewTfInitAllCommand\(p \*CommandParams\) TfCommandResult](<#NewTfInitAllCommand>)
  - [func NewTfInitCommand\(p \*CommandParams\) TfCommandResult](<#NewTfInitCommand>)
  - [func NewTfOutputCommand\(p \*CommandParams\) TfCommandResult](<#NewTfOutputCommand>)
  - [func NewTfPlanCommand\(p \*CommandParams\) TfCommandResult](<#NewTfPlanCommand>)
  - [func NewTfRefreshAllCommand\(p \*CommandParams\) TfCommandResult](<#NewTfRefreshAllCommand>)
  - [func NewTfRefreshCommand\(p \*CommandParams\) TfCommandResult](<#NewTfRefreshCommand>)
  - [func NewTfValidateCommand\(p \*CommandParams\) TfCommandResult](<#NewTfValidateCommand>)
  - [func NewTfVersionCommand\(p \*CommandParams\) TfCommandResult](<#NewTfVersionCommand>)


## Variables

<a name="RootCommandsModule"></a>RootCommandsModule defines the root commands module for dependency injection. It provides all root\-level commands and their dependencies.

```go
var RootCommandsModule = fx.Module("rootCmds",
    fx.Provide(
        func() *CommandParams {
            return NewCommandParams(time.Now())
        },
        NewRootInstallCommand,
        NewRootCleanCommand,
        NewRootLoginCommand,
        NewRootInfoCommand,
        NewRootCheckCommand,
        NewRootRenderCommand,
        NewRootRefreshSecretsCommand,
        NewRootExportCommand,
        NewRootRestartCommand,
        NewRootTerraformCommand,
        NewRootAwsCommand,
        NewRootInternalCommand,
    ),
    tfCommandsModule,
    awsCommandsModule,
)
```

<a name="AwsGetEksToken"></a>
## func AwsGetEksToken

```go
func AwsGetEksToken(ctx context.Context, name string, region string) error
```

AwsGetEksToken retrieves an authentication token for an EKS cluster. This function is used by kubeconfig exec to request the token, similar to \`aws eks get\-token\`.

Parameters:

- ctx: The context for the operation.
- name: The name of the EKS cluster.
- region: The AWS region where the EKS cluster is located.

Returns:

- error: An error if the token retrieval fails, otherwise nil.

<a name="Banner"></a>
## func Banner

```go
func Banner()
```

Banner displays the Quartz banner.

<a name="ByCommandName"></a>
## func ByCommandName

```go
func ByCommandName(a, b *cli.Command) int
```

ByCommandName compares two CLI commands by their names.

Parameters:

- a: The first CLI command.
- b: The second CLI command.

Returns:

- int: A negative number if a.Name \< b.Name, zero if a.Name == b.Name, or a positive number if a.Name \> b.Name.

<a name="Check"></a>
## func Check

```go
func Check(ctx context.Context, p *CommandParams)
```

Check verifies the dependencies required for Quartz installation.

Parameters:

- ctx: The context for the operation.
- p: \*CommandParams containing configuration and runtime parameters.

<a name="Clean"></a>
## func Clean

```go
func Clean(ctx context.Context, refresh bool, p *CommandParams) error
```

Clean tears down the Quartz environment, including all managed resources and data. This includes refreshing Terraform states, destroying resources, and cleaning up.

Parameters:

- ctx: The context for the operation.
- refresh: A boolean indicating whether to refresh the Terraform state before destruction.
- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- error: An error if the cleanup fails, otherwise nil.

<a name="Cleanup"></a>
## func Cleanup

```go
func Cleanup(ctx context.Context, p *CommandParams) error
```

Cleanup removes temporary files created by the installer.

Parameters:

- ctx: The context for the operation.
- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- error: An error if cleanup fails, otherwise nil.

<a name="ClusterInfo"></a>
## func ClusterInfo

```go
func ClusterInfo(ctx context.Context, p *CommandParams) error
```

ClusterInfo retrieves and displays information about the Quartz cluster.

Parameters:

- ctx: The context for the operation.
- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- error: An error if retrieving cluster information fails, otherwise nil.

<a name="ClusterLogin"></a>
## func ClusterLogin

```go
func ClusterLogin(ctx context.Context, path string, p *CommandParams) error
```

ClusterLogin generates a kubeconfig file for the Quartz environment.

Parameters:

- ctx: The context for the operation.
- path: The file path where the kubeconfig will be written.
- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- error: An error if generating the kubeconfig fails, otherwise nil.

<a name="Confirm"></a>
## func Confirm

```go
func Confirm(ctx context.Context, msg string, p *CommandParams) error
```

Confirm prompts the user for confirmation before proceeding with an operation.

Parameters:

- ctx: The context for the operation.
- msg: The confirmation message to display.
- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- error: An error if the user does not confirm, otherwise nil.

<a name="Export"></a>
## func Export

```go
func Export(ctx context.Context, p *CommandParams) error
```

Export saves the configured Kubernetes resources to YAML files.

Parameters:

- ctx: The context for the operation.
- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- error: An error if exporting resources fails, otherwise nil.

<a name="ForceCleanup"></a>
## func ForceCleanup

```go
func ForceCleanup(ctx context.Context, p *CommandParams) error
```

ForceCleanup performs post\-delete cleanup, including removing temporary files and destroying the Terraform state bucket.

Parameters:

- ctx: The context for the operation.
- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- error: An error if the cleanup fails, otherwise nil.

<a name="Install"></a>
## func Install

```go
func Install(ctx context.Context, p *CommandParams) error
```

Install sets up the Quartz environment by initializing and applying all stages. This includes preparing the account, creating the Terraform backend, and applying configurations.

Parameters:

- ctx: The context for the operation.
- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- error: An error if the installation fails, otherwise nil.

<a name="NewCliCommand"></a>
## func NewCliCommand

```go
func NewCliCommand(deps CliDependencies, p AppServiceParams) *cli.Command
```

NewCliCommand creates a new CLI command with the provided dependencies.

Parameters:

- deps: CliDependencies containing the required dependencies.

Returns:

- \*cli.Command: The root CLI command for the Quartz tool.

<a name="PrepareAccount"></a>
## func PrepareAccount

```go
func PrepareAccount(ctx context.Context, p *CommandParams) error
```

PrepareAccount prepares the cloud account for Quartz operations.

Parameters:

- ctx: The context for the operation.
- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- error: An error if preparing the account fails, otherwise nil.

<a name="RefreshSecrets"></a>
## func RefreshSecrets

```go
func RefreshSecrets(ctx context.Context, p *CommandParams) error
```

RefreshSecrets triggers an immediate refresh of all external secrets.

Parameters:

- ctx: The context for the operation.
- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- error: An error if refreshing secrets fails, otherwise nil.

<a name="Render"></a>
## func Render

```go
func Render(ctx context.Context, path string, p *CommandParams) error
```

Render writes the full configuration to the specified file path.

Parameters:

- ctx: The context for the operation.
- path: The file path where the configuration will be written.
- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- error: An error if the rendering fails, otherwise nil.

<a name="Restart"></a>
## func Restart

```go
func Restart(ctx context.Context, res string, ns string, name string, p *CommandParams) error
```

Restart restarts a Kubernetes resource in the specified namespace.

Parameters:

- ctx: The context for the operation.
- res: The resource type to restart \(e.g., deployment, daemonset\).
- ns: The namespace of the resource.
- name: The name of the resource.
- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- error: An error if restarting the resource fails, otherwise nil.

<a name="RunAppService"></a>
## func RunAppService

```go
func RunAppService(p AppServiceParams)
```

RunAppService initializes and runs the application service using Uber's Fx framework. It sets up dependency injection, logging, and lifecycle hooks for the application.

<a name="TfApply"></a>
## func TfApply

```go
func TfApply(ctx context.Context, stage string, p *CommandParams) error
```

TfApply runs \`terraform apply\` for a specific stage.

<a name="TfCreateBackend"></a>
## func TfCreateBackend

```go
func TfCreateBackend(ctx context.Context, p *CommandParams) error
```

TfCreateBackend creates the Terraform state backend.

<a name="TfDestroy"></a>
## func TfDestroy

```go
func TfDestroy(ctx context.Context, stage string, p *CommandParams) error
```

TfDestroy runs \`terraform destroy\` for a specific stage.

<a name="TfDestroyBackend"></a>
## func TfDestroyBackend

```go
func TfDestroyBackend(ctx context.Context, p *CommandParams) error
```

TfDestroyBackend destroys the Terraform state backend.

<a name="TfFormat"></a>
## func TfFormat

```go
func TfFormat(ctx context.Context, stage string, p *CommandParams) error
```

TfFormat runs \`terraform fmt\` for a specific stage.

<a name="TfFormatAll"></a>
## func TfFormatAll

```go
func TfFormatAll(ctx context.Context, p *CommandParams) error
```

TfFormatAll runs \`terraform fmt\` for all stages.

<a name="TfInit"></a>
## func TfInit

```go
func TfInit(ctx context.Context, stage string, p *CommandParams) error
```

TfInit runs \`terraform init\` for a specific stage.

<a name="TfInitAll"></a>
## func TfInitAll

```go
func TfInitAll(ctx context.Context, p *CommandParams) error
```

TfInitAll runs \`terraform init\` for all stages.

<a name="TfOutput"></a>
## func TfOutput

```go
func TfOutput(ctx context.Context, stage string, p *CommandParams) error
```

TfOutput retrieves the Terraform output for a specific stage.

<a name="TfPlan"></a>
## func TfPlan

```go
func TfPlan(ctx context.Context, stage string, p *CommandParams) error
```

TfPlan runs \`terraform plan\` for a specific stage.

<a name="TfRefresh"></a>
## func TfRefresh

```go
func TfRefresh(ctx context.Context, stage string, p *CommandParams) error
```

TfRefresh runs \`terraform refresh\` for a specific stage.

<a name="TfRefreshAll"></a>
## func TfRefreshAll

```go
func TfRefreshAll(ctx context.Context, p *CommandParams) error
```

TfRefreshAll runs \`terraform refresh\` for all stages.

<a name="TfValidate"></a>
## func TfValidate

```go
func TfValidate(ctx context.Context, stage string, p *CommandParams) (int, error)
```

TfValidate runs \`terraform validate\` for a specific stage.

<a name="TfVersion"></a>
## func TfVersion

```go
func TfVersion(ctx context.Context, p *CommandParams) error
```

TfVersion checks and displays the Terraform version.

<a name="Version"></a>
## func Version

```go
func Version(version string, buildDate string)
```

Version displays the version of the Quartz installer along with the build date.

Parameters:

- version: The version of the Quartz installer.
- buildDate: The build date of the Quartz installer.

<a name="AppService"></a>
## type AppService

AppService represents the main application service that manages the CLI command execution and the lifecycle of the application.

```go
type AppService struct {
    // contains filtered or unexported fields
}
```

<a name="NewAppService"></a>
### func NewAppService

```go
func NewAppService(app *cli.Command, sd fx.Shutdowner) *AppService
```

NewAppService creates a new instance of AppService with the provided CLI command and shutdowner.

<a name="AppService.Start"></a>
### func \(\*AppService\) Start

```go
func (svc *AppService) Start(args []string) error
```

Start begins the execution of the CLI application. It manages the lifecycle of the application and listens for shutdown signals or errors during execution.

<a name="AppService.Stop"></a>
### func \(\*AppService\) Stop

```go
func (svc *AppService) Stop() error
```

Stop waits for all goroutines to finish and returns any error encountered during execution.

<a name="AppServiceParams"></a>
## type AppServiceParams



```go
type AppServiceParams struct {
    Version   string
    BuildDate string
}
```

<a name="AwsCommandParams"></a>
## type AwsCommandParams

AwsCommandParams represents the input parameters for AWS\-related commands. It is used to group AWS commands for dependency injection.

```go
type AwsCommandParams struct {
    fx.In
    Commands []*cli.Command `group:"aws"`
}
```

<a name="AwsCommandResult"></a>
## type AwsCommandResult

AwsCommandResult represents the output result for an AWS command. It is used to group AWS commands for dependency injection.

```go
type AwsCommandResult struct {
    fx.Out
    Command *cli.Command `group:"aws"`
}
```

<a name="NewGetEksTokenCommand"></a>
### func NewGetEksTokenCommand

```go
func NewGetEksTokenCommand() AwsCommandResult
```

NewGetEksTokenCommand creates a CLI command for retrieving an EKS authentication token.

Returns:

- AwsCommandResult containing the CLI command for retrieving the token.

<a name="CliDependencies"></a>
## type CliDependencies

CliDependencies contains the dependencies required to initialize the CLI. It is used to inject parameters, root commands, and build metadata.

Fields:

- Params: CommandParams for managing CLI configuration and secrets.
- Root: RootCommandParams containing the list of root\-level commands.
- Version: The version of the CLI.
- BuildDate: The build date of the CLI.

```go
type CliDependencies struct {
    fx.In
    Params *CommandParams
    Root   RootCommandParams
}
```

<a name="CommandParams"></a>
## type CommandParams

CommandParams holds the configuration and runtime parameters for CLI commands.

Fields:

- configFile: Path to the configuration file.
- secretsFile: Path to the secrets file.
- startTime: The time when the command execution started.
- settings: Lazy\-loaded settings from the configuration file.
- provider: Lazy\-loaded provider factory for managing resources.

```go
type CommandParams struct {
    // contains filtered or unexported fields
}
```

<a name="NewCommandParams"></a>
### func NewCommandParams

```go
func NewCommandParams(startTime time.Time) *CommandParams
```

NewCommandParams creates a new instance of CommandParams.

Parameters:

- startTime: The time when the command execution started.

Returns:

- \*CommandParams: A new instance of CommandParams.

<a name="CommandParams.Provider"></a>
### func \(\*CommandParams\) Provider

```go
func (p *CommandParams) Provider() *provider.ProviderFactory
```

Provider lazy loads the provider factory.

Returns:

- \*provider.ProviderFactory: The provider factory for managing resources.

<a name="CommandParams.SetConfig"></a>
### func \(\*CommandParams\) SetConfig

```go
func (p *CommandParams) SetConfig(configFile string)
```

SetConfig sets the configuration file path for the command parameters.

Parameters:

- configFile: The path to the configuration file.

<a name="CommandParams.SetSecrets"></a>
### func \(\*CommandParams\) SetSecrets

```go
func (p *CommandParams) SetSecrets(secretsFile string)
```

SetSecrets sets the secrets file path for the command parameters.

Parameters:

- secretsFile: The path to the secrets file.

<a name="CommandParams.Settings"></a>
### func \(\*CommandParams\) Settings

```go
func (p *CommandParams) Settings() *config.Settings
```

Settings lazy loads the settings from the configuration file.

Returns:

- \*config.Settings: The loaded settings from the configuration file.

<a name="RootCommandParams"></a>
## type RootCommandParams

RootCommandParams represents the input parameters for root\-level commands. It is used to group root commands for dependency injection.

```go
type RootCommandParams struct {
    fx.In
    Commands []*cli.Command `group:"root"`
}
```

<a name="RootCommandResult"></a>
## type RootCommandResult

RootCommandResult represents the output result for a root\-level command. It is used to group root commands for dependency injection.

```go
type RootCommandResult struct {
    fx.Out
    Command *cli.Command `group:"root"`
}
```

<a name="NewRootAwsCommand"></a>
### func NewRootAwsCommand

```go
func NewRootAwsCommand(cmds AwsCommandParams) RootCommandResult
```

NewRootAwsCommand creates the root AWS CLI command. It organizes and returns all AWS\-related subcommands.

Parameters:

- cmds: AwsCommandParams containing the list of AWS subcommands.

Returns:

- RootCommandResult containing the root AWS CLI command.

<a name="NewRootCheckCommand"></a>
### func NewRootCheckCommand

```go
func NewRootCheckCommand(p *CommandParams) RootCommandResult
```



<a name="NewRootCleanCommand"></a>
### func NewRootCleanCommand

```go
func NewRootCleanCommand(p *CommandParams) RootCommandResult
```

NewRootCleanCommand creates the "clean" root command for the CLI. This command performs a full cleanup or teardown of the Quartz system.

Parameters:

- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- RootCommandResult containing the "clean" CLI command.

<a name="NewRootExportCommand"></a>
### func NewRootExportCommand

```go
func NewRootExportCommand(p *CommandParams) RootCommandResult
```



<a name="NewRootInfoCommand"></a>
### func NewRootInfoCommand

```go
func NewRootInfoCommand(p *CommandParams) RootCommandResult
```



<a name="NewRootInstallCommand"></a>
### func NewRootInstallCommand

```go
func NewRootInstallCommand(p *CommandParams) RootCommandResult
```

NewRootInstallCommand creates the "install" root command for the CLI. This command performs a full installation or update of the Quartz system.

Parameters:

- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- RootCommandResult containing the "install" CLI command.

<a name="NewRootInternalCommand"></a>
### func NewRootInternalCommand

```go
func NewRootInternalCommand(p *CommandParams) RootCommandResult
```

NewRootInternalCommand creates the "internal" root command for the CLI. This command is hidden and is used for internal operations such as force cleanup.

Parameters:

- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- RootCommandResult containing the "internal" CLI command.

<a name="NewRootLoginCommand"></a>
### func NewRootLoginCommand

```go
func NewRootLoginCommand(p *CommandParams) RootCommandResult
```



<a name="NewRootRefreshSecretsCommand"></a>
### func NewRootRefreshSecretsCommand

```go
func NewRootRefreshSecretsCommand(p *CommandParams) RootCommandResult
```



<a name="NewRootRenderCommand"></a>
### func NewRootRenderCommand

```go
func NewRootRenderCommand(p *CommandParams) RootCommandResult
```



<a name="NewRootRestartCommand"></a>
### func NewRootRestartCommand

```go
func NewRootRestartCommand(p *CommandParams) RootCommandResult
```



<a name="NewRootTerraformCommand"></a>
### func NewRootTerraformCommand

```go
func NewRootTerraformCommand(cmds TfCommandParams, p *CommandParams) RootCommandResult
```

NewRootTerraformCommand creates the "terraform" root command for the CLI. This command provides subcommands for managing Terraform stages.

Parameters:

- cmds: TfCommandParams containing the list of Terraform subcommands.
- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- RootCommandResult containing the "terraform" CLI command.

<a name="TfCommandParams"></a>
## type TfCommandParams

TfCommandParams represents the input parameters for Terraform\-related commands. It is used to group Terraform commands for dependency injection.

```go
type TfCommandParams struct {
    fx.In
    Commands []*cli.Command `group:"tf"`
}
```

<a name="TfCommandResult"></a>
## type TfCommandResult

TfCommandResult represents the output result for a Terraform command. It is used to group Terraform commands for dependency injection.

```go
type TfCommandResult struct {
    fx.Out
    Command *cli.Command `group:"tf"`
}
```

<a name="NewTfApplyCommand"></a>
### func NewTfApplyCommand

```go
func NewTfApplyCommand(p *CommandParams) TfCommandResult
```

NewTfApplyCommand creates a CLI command for running \`terraform apply\` on a specific stage.

Parameters:

- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- TfCommandResult containing the "apply" CLI command.

<a name="NewTfDestroyCommand"></a>
### func NewTfDestroyCommand

```go
func NewTfDestroyCommand(p *CommandParams) TfCommandResult
```

NewTfDestroyCommand creates a CLI command for running \`terraform destroy\` on a specific stage.

Parameters:

- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- TfCommandResult containing the "destroy" CLI command.

<a name="NewTfFormatAllCommand"></a>
### func NewTfFormatAllCommand

```go
func NewTfFormatAllCommand(p *CommandParams) TfCommandResult
```

NewTfFormatAllCommand creates a CLI command for running \`terraform fmt\` on all stages.

<a name="NewTfFormatCommand"></a>
### func NewTfFormatCommand

```go
func NewTfFormatCommand(p *CommandParams) TfCommandResult
```

NewTfFormatCommand creates a CLI command for running \`terraform fmt\` on a specific stage.

<a name="NewTfInitAllCommand"></a>
### func NewTfInitAllCommand

```go
func NewTfInitAllCommand(p *CommandParams) TfCommandResult
```

NewTfInitAllCommand creates a CLI command for running \`terraform init\` on all stages.

Parameters:

- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- TfCommandResult containing the "init\-all" CLI command.

<a name="NewTfInitCommand"></a>
### func NewTfInitCommand

```go
func NewTfInitCommand(p *CommandParams) TfCommandResult
```

NewTfInitCommand creates a CLI command for running \`terraform init\` on a specific stage.

Parameters:

- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- TfCommandResult containing the "init" CLI command.

<a name="NewTfOutputCommand"></a>
### func NewTfOutputCommand

```go
func NewTfOutputCommand(p *CommandParams) TfCommandResult
```

NewTfOutputCommand creates a CLI command for retrieving Terraform output for a specific stage.

<a name="NewTfPlanCommand"></a>
### func NewTfPlanCommand

```go
func NewTfPlanCommand(p *CommandParams) TfCommandResult
```

NewTfPlanCommand creates a CLI command for running \`terraform plan\` on a specific stage.

Parameters:

- p: \*CommandParams containing configuration and runtime parameters.

Returns:

- TfCommandResult containing the "plan" CLI command.

<a name="NewTfRefreshAllCommand"></a>
### func NewTfRefreshAllCommand

```go
func NewTfRefreshAllCommand(p *CommandParams) TfCommandResult
```

NewTfRefreshAllCommand creates a CLI command for running \`terraform refresh\` on all stages.

<a name="NewTfRefreshCommand"></a>
### func NewTfRefreshCommand

```go
func NewTfRefreshCommand(p *CommandParams) TfCommandResult
```

NewTfRefreshCommand creates a CLI command for running \`terraform refresh\` on a specific stage.

<a name="NewTfValidateCommand"></a>
### func NewTfValidateCommand

```go
func NewTfValidateCommand(p *CommandParams) TfCommandResult
```

NewTfValidateCommand creates a CLI command for running \`terraform validate\` on a specific stage.

<a name="NewTfVersionCommand"></a>
### func NewTfVersionCommand

```go
func NewTfVersionCommand(p *CommandParams) TfCommandResult
```

NewTfVersionCommand creates a CLI command for checking and displaying the Terraform version.

# config

```go
import "github.com/MetroStar/quartzctl/internal/config"
```

Package config implements parsing and serialization for the quartz.yaml, environment and secrets required by the platform

## Index

- [func LoadRawConfig\(ctx context.Context, configFile string\) \(\*koanf.Koanf, error\)](<#LoadRawConfig>)
- [func LoadRawSecrets\(ctx context.Context, secretsFile string\) \(\*koanf.Koanf, error\)](<#LoadRawSecrets>)
- [type Settings](<#Settings>)
  - [func Load\(ctx context.Context, configFile string, secretsFile string\) \(Settings, error\)](<#Load>)
  - [func NewSettings\(c \*koanf.Koanf, s \*koanf.Koanf\) \(Settings, error\)](<#NewSettings>)
  - [func \(r Settings\) ConfigString\(key string\) string](<#Settings.ConfigString>)
  - [func \(r Settings\) SecretString\(key string\) string](<#Settings.SecretString>)
  - [func \(r Settings\) WriteJsonConfig\(path string, root string, indent bool\) error](<#Settings.WriteJsonConfig>)
  - [func \(r Settings\) WriteYamlConfig\(path string\) error](<#Settings.WriteYamlConfig>)


<a name="LoadRawConfig"></a>
## func LoadRawConfig

```go
func LoadRawConfig(ctx context.Context, configFile string) (*koanf.Koanf, error)
```

LoadRawConfig reads the specified configuration file and processes it into a Koanf map. It applies defaults, environment variables, and additional settings.

<a name="LoadRawSecrets"></a>
## func LoadRawSecrets

```go
func LoadRawSecrets(ctx context.Context, secretsFile string) (*koanf.Koanf, error)
```

LoadRawSecrets reads the secrets file and processes it into a Koanf map. It also loads credentials from environment variables.

<a name="Settings"></a>
## type Settings

Settings is a wrapper for the main Quartz configuration and secrets.

```go
type Settings struct {
    Config  schema.QuartzConfig  // The parsed Quartz configuration.
    Secrets schema.QuartzSecrets // The parsed Quartz secrets.
    // contains filtered or unexported fields
}
```

<a name="Load"></a>
### func Load

```go
func Load(ctx context.Context, configFile string, secretsFile string) (Settings, error)
```

Load reads the configuration and secrets files and parses them into a Settings instance.

<a name="NewSettings"></a>
### func NewSettings

```go
func NewSettings(c *koanf.Koanf, s *koanf.Koanf) (Settings, error)
```

NewSettings creates a new Settings instance by parsing the provided configuration and secrets maps. Returns an error if unmarshalling fails.

<a name="Settings.ConfigString"></a>
### func \(Settings\) ConfigString

```go
func (r Settings) ConfigString(key string) string
```

ConfigString retrieves a raw configuration value by its key.

<a name="Settings.SecretString"></a>
### func \(Settings\) SecretString

```go
func (r Settings) SecretString(key string) string
```

SecretString retrieves a raw secret value by its key.

<a name="Settings.WriteJsonConfig"></a>
### func \(Settings\) WriteJsonConfig

```go
func (r Settings) WriteJsonConfig(path string, root string, indent bool) error
```

WriteJsonConfig writes the application configuration to a JSON file. Supports an optional root key and indentation for pretty printing.

<a name="Settings.WriteYamlConfig"></a>
### func \(Settings\) WriteYamlConfig

```go
func (r Settings) WriteYamlConfig(path string) error
```

WriteYamlConfig writes the application configuration to a YAML file.

# log

```go
import "github.com/MetroStar/quartzctl/internal/log"
```

## Index

- [Variables](<#variables>)
- [func ConfigureDefault\(configFile string, w io.Writer\)](<#ConfigureDefault>)
- [func Debug\(msg interface\{\}, keyvals ...interface\{\}\)](<#Debug>)
- [func DebugEnvOverride\(\) bool](<#DebugEnvOverride>)
- [func Error\(msg interface\{\}, keyvals ...interface\{\}\)](<#Error>)
- [func Info\(msg interface\{\}, keyvals ...interface\{\}\)](<#Info>)
- [func SetDefault\(logger AppLogger\)](<#SetDefault>)
- [func Sync\(\) error](<#Sync>)
- [func Warn\(msg interface\{\}, keyvals ...interface\{\}\)](<#Warn>)
- [type AppLogger](<#AppLogger>)
  - [func Default\(\) AppLogger](<#Default>)
  - [func NewZapLogger\(cfg LogConfig, w io.Writer\) AppLogger](<#NewZapLogger>)
- [type ConsoleLogConfig](<#ConsoleLogConfig>)
- [type FileLogConfig](<#FileLogConfig>)
- [type FxLogger](<#FxLogger>)
  - [func NewFxLogger\(\) \*FxLogger](<#NewFxLogger>)
  - [func \(l \*FxLogger\) LogEvent\(event fxevent.Event\)](<#FxLogger.LogEvent>)
- [type LogConfig](<#LogConfig>)
  - [func NewLogConfig\(path string\) \(LogConfig, error\)](<#NewLogConfig>)
- [type LogOptionsConfig](<#LogOptionsConfig>)
- [type TerraformLogConfig](<#TerraformLogConfig>)
- [type ZapLogger](<#ZapLogger>)
  - [func \(l \*ZapLogger\) Debug\(msg interface\{\}, keyvals ...interface\{\}\)](<#ZapLogger.Debug>)
  - [func \(l \*ZapLogger\) Error\(msg interface\{\}, keyvals ...interface\{\}\)](<#ZapLogger.Error>)
  - [func \(l \*ZapLogger\) Info\(msg interface\{\}, keyvals ...interface\{\}\)](<#ZapLogger.Info>)
  - [func \(l \*ZapLogger\) LogEvent\(event fxevent.Event\)](<#ZapLogger.LogEvent>)
  - [func \(l \*ZapLogger\) Sync\(\) error](<#ZapLogger.Sync>)
  - [func \(l \*ZapLogger\) Warn\(msg interface\{\}, keyvals ...interface\{\}\)](<#ZapLogger.Warn>)


## Variables

<a name="DefaultLogConfig"></a>DefaultLogConfig provides the default logging configuration.

```go
var DefaultLogConfig = LogConfig{
    Log: LogOptionsConfig{
        Console: ConsoleLogConfig{
            Level: "error",
        },
        File: FileLogConfig{
            Enabled: false,
            Path:    "log/$name.$date.log",
            Level:   "info",
        },
        Terraform: TerraformLogConfig{
            Enabled: false,
            Path:    "log/$name.$date.tf.log",
            Level:   "trace",
        },
    },
}
```

<a name="ConfigureDefault"></a>
## func ConfigureDefault

```go
func ConfigureDefault(configFile string, w io.Writer)
```

ConfigureDefault configures the default logger using the provided configuration file and writer. If an error occurs during configuration, it falls back to the default logger.

<a name="Debug"></a>
## func Debug

```go
func Debug(msg interface{}, keyvals ...interface{})
```

Debug logs a debug message using the default logger.

<a name="DebugEnvOverride"></a>
## func DebugEnvOverride

```go
func DebugEnvOverride() bool
```

DebugEnvOverride checks if the DEBUG environment variable is set to "true" or "1". If set, all loggers will be overridden to debug level regardless of the configured thresholds.

<a name="Error"></a>
## func Error

```go
func Error(msg interface{}, keyvals ...interface{})
```

Error logs an error message using the default logger.

<a name="Info"></a>
## func Info

```go
func Info(msg interface{}, keyvals ...interface{})
```

Info logs an informational message using the default logger.

<a name="SetDefault"></a>
## func SetDefault

```go
func SetDefault(logger AppLogger)
```

SetDefault sets the provided logger as the default global logger.

<a name="Sync"></a>
## func Sync

```go
func Sync() error
```

Sync flushes any buffered log entries from the default logger.

<a name="Warn"></a>
## func Warn

```go
func Warn(msg interface{}, keyvals ...interface{})
```

Warn logs a warning message using the default logger.

<a name="AppLogger"></a>
## type AppLogger

AppLogger defines the interface for application loggers.

```go
type AppLogger interface {
    Sync() error
    Debug(msg interface{}, keyvals ...interface{})
    Info(msg interface{}, keyvals ...interface{})
    Warn(msg interface{}, keyvals ...interface{})
    Error(msg interface{}, keyvals ...interface{})
    LogEvent(event fxevent.Event)
}
```

<a name="Default"></a>
### func Default

```go
func Default() AppLogger
```

Default returns the default global logger instance. It initializes the logger if it has not been set already.

<a name="NewZapLogger"></a>
### func NewZapLogger

```go
func NewZapLogger(cfg LogConfig, w io.Writer) AppLogger
```

NewZapLogger creates a new instance of ZapLogger with the provided configuration and writer.

<a name="ConsoleLogConfig"></a>
## type ConsoleLogConfig

ConsoleLogConfig represents the configuration for console logging.

```go
type ConsoleLogConfig struct {
    Level string `koanf:"level"`
}
```

<a name="FileLogConfig"></a>
## type FileLogConfig

FileLogConfig represents the configuration for file\-based logging.

```go
type FileLogConfig struct {
    Enabled bool   `koanf:"enabled"`
    Path    string `koanf:"path"`
    Level   string `koanf:"level"`
}
```

<a name="FxLogger"></a>
## type FxLogger

FxLogger is a logger implementation for Uber FX that uses a fallback logger until the default logger is configured.

```go
type FxLogger struct {
    // contains filtered or unexported fields
}
```

<a name="NewFxLogger"></a>
### func NewFxLogger

```go
func NewFxLogger() *FxLogger
```

NewFxLogger creates a new FxLogger instance. It uses the system's default logger if debugging is enabled, or a no\-op logger otherwise. This suppresses initial DI container logs until the logger is fully configured.

<a name="FxLogger.LogEvent"></a>
### func \(\*FxLogger\) LogEvent

```go
func (l *FxLogger) LogEvent(event fxevent.Event)
```

LogEvent logs an fxevent.Event. If the default logger is not yet configured, it uses the fallback logger.

<a name="LogConfig"></a>
## type LogConfig

LogConfig represents the configuration for logging, including log name and options.

```go
type LogConfig struct {
    Name string           `koanf:"name"`
    Log  LogOptionsConfig `koanf:"log"`
}
```

<a name="NewLogConfig"></a>
### func NewLogConfig

```go
func NewLogConfig(path string) (LogConfig, error)
```

NewLogConfig loads the logging configuration from the specified file path. If the path is empty or an error occurs, it returns the default configuration.

<a name="LogOptionsConfig"></a>
## type LogOptionsConfig

LogOptionsConfig contains configuration options for different logging outputs.

```go
type LogOptionsConfig struct {
    Console   ConsoleLogConfig   `koanf:"console"`
    File      FileLogConfig      `koanf:"file"`
    Terraform TerraformLogConfig `koanf:"terraform"`
}
```

<a name="TerraformLogConfig"></a>
## type TerraformLogConfig

TerraformLogConfig represents the configuration for Terraform\-specific logging.

```go
type TerraformLogConfig struct {
    Enabled bool   `koanf:"enabled"`
    Path    string `koanf:"path"`
    Level   string `koanf:"level"`
}
```

<a name="ZapLogger"></a>
## type ZapLogger

ZapLogger is a logger implementation using Uber's Zap library.

```go
type ZapLogger struct {
    // contains filtered or unexported fields
}
```

<a name="ZapLogger.Debug"></a>
### func \(\*ZapLogger\) Debug

```go
func (l *ZapLogger) Debug(msg interface{}, keyvals ...interface{})
```

Debug prints a debug message with optional key\-value pairs.

<a name="ZapLogger.Error"></a>
### func \(\*ZapLogger\) Error

```go
func (l *ZapLogger) Error(msg interface{}, keyvals ...interface{})
```

Error prints an error message with optional key\-value pairs.

<a name="ZapLogger.Info"></a>
### func \(\*ZapLogger\) Info

```go
func (l *ZapLogger) Info(msg interface{}, keyvals ...interface{})
```

Info prints an informational message with optional key\-value pairs.

<a name="ZapLogger.LogEvent"></a>
### func \(\*ZapLogger\) LogEvent

```go
func (l *ZapLogger) LogEvent(event fxevent.Event)
```

LogEvent logs an fxevent.Event using the underlying fxevent.Logger.

<a name="ZapLogger.Sync"></a>
### func \(\*ZapLogger\) Sync

```go
func (l *ZapLogger) Sync() error
```

Sync flushes any buffered log entries.

<a name="ZapLogger.Warn"></a>
### func \(\*ZapLogger\) Warn

```go
func (l *ZapLogger) Warn(msg interface{}, keyvals ...interface{})
```

Warn prints a warning message with optional key\-value pairs.

# provider

```go
import "github.com/MetroStar/quartzctl/internal/provider"
```

## Index

- [Constants](<#constants>)
- [func Check\(ctx context.Context, opts \*ProviderCheckOpts\)](<#Check>)
- [type AwsClient](<#AwsClient>)
  - [func NewAwsClient\(id string, region string, cfg aws.Config, sdk AwsSdkClientFactory\) AwsClient](<#NewAwsClient>)
  - [func NewLazyAwsClient\(ctx context.Context, id string, region string\) \(AwsClient, error\)](<#NewLazyAwsClient>)
  - [func \(c \*AwsClient\) BucketExists\(ctx context.Context, name string\) \(bool, error\)](<#AwsClient.BucketExists>)
  - [func \(c AwsClient\) CheckAccess\(ctx context.Context\) ProviderCheckResult](<#AwsClient.CheckAccess>)
  - [func \(c AwsClient\) CheckConfig\(\) error](<#AwsClient.CheckConfig>)
  - [func \(c AwsClient\) CreateBucket\(ctx context.Context, name string, force bool\) error](<#AwsClient.CreateBucket>)
  - [func \(c \*AwsClient\) CreateDynamodbTable\(ctx context.Context, name string, force bool\) error](<#AwsClient.CreateDynamodbTable>)
  - [func \(c AwsClient\) CreateStateBackend\(ctx context.Context\) error](<#AwsClient.CreateStateBackend>)
  - [func \(c AwsClient\) CurrentIdentity\(ctx context.Context\) \(CloudProviderIdentity, error\)](<#AwsClient.CurrentIdentity>)
  - [func \(c \*AwsClient\) DescribeEksCluster\(ctx context.Context\) \(\*eks.DescribeClusterOutput, error\)](<#AwsClient.DescribeEksCluster>)
  - [func \(c \*AwsClient\) DestroyBucket\(ctx context.Context, name string\) error](<#AwsClient.DestroyBucket>)
  - [func \(c \*AwsClient\) DestroyDynamodbTable\(ctx context.Context, name string\) error](<#AwsClient.DestroyDynamodbTable>)
  - [func \(c AwsClient\) DestroyStateBackend\(ctx context.Context\) error](<#AwsClient.DestroyStateBackend>)
  - [func \(c \*AwsClient\) DynamodbTableExists\(ctx context.Context, name string, d time.Duration\) bool](<#AwsClient.DynamodbTableExists>)
  - [func \(c \*AwsClient\) EksKubeconfigInfo\(ctx context.Context\) \(KubeconfigInfo, EksToken, error\)](<#AwsClient.EksKubeconfigInfo>)
  - [func \(c AwsClient\) KubeconfigInfo\(ctx context.Context\) \(KubeconfigInfo, error\)](<#AwsClient.KubeconfigInfo>)
  - [func \(c AwsClient\) PrepareAccount\(ctx context.Context\) error](<#AwsClient.PrepareAccount>)
  - [func \(c AwsClient\) PrintClusterInfo\(ctx context.Context\) error](<#AwsClient.PrintClusterInfo>)
  - [func \(c AwsClient\) PrintConfig\(\)](<#AwsClient.PrintConfig>)
  - [func \(c AwsClient\) ProviderName\(\) string](<#AwsClient.ProviderName>)
  - [func \(c AwsClient\) StateBackendInfo\(stage string\) CloudProviderStateBackend](<#AwsClient.StateBackendInfo>)
- [type AwsProviderCheckResult](<#AwsProviderCheckResult>)
  - [func \(r AwsProviderCheckResult\) ToTable\(\) \(\[\]string, \[\]ProviderCheckResultRow\)](<#AwsProviderCheckResult.ToTable>)
- [type AwsSdkClientFactory](<#AwsSdkClientFactory>)
- [type CloudProviderClient](<#CloudProviderClient>)
  - [func NewCloudProviderClient\(ctx context.Context, cfg schema.QuartzConfig\) \(CloudProviderClient, error\)](<#NewCloudProviderClient>)
  - [func NewCloudProviderClientWithOpts\(ctx context.Context, o CloudProviderClientOpts\) \(CloudProviderClient, error\)](<#NewCloudProviderClientWithOpts>)
- [type CloudProviderClientOpts](<#CloudProviderClientOpts>)
- [type CloudProviderIdentity](<#CloudProviderIdentity>)
- [type CloudProviderStateBackend](<#CloudProviderStateBackend>)
- [type CloudflareAccessCheckResult](<#CloudflareAccessCheckResult>)
  - [func \(r CloudflareAccessCheckResult\) ToTable\(\) \(\[\]string, \[\]ProviderCheckResultRow\)](<#CloudflareAccessCheckResult.ToTable>)
- [type CloudflareClient](<#CloudflareClient>)
  - [func NewCloudflareClient\(httpClient util.HttpClientFactory, providerName string, accountId string, apiToken string, domain string\) \(CloudflareClient, error\)](<#NewCloudflareClient>)
  - [func \(c CloudflareClient\) CheckAccess\(ctx context.Context\) ProviderCheckResult](<#CloudflareClient.CheckAccess>)
  - [func \(c CloudflareClient\) ProviderName\(\) string](<#CloudflareClient.ProviderName>)
- [type CloudflareZonesResponse](<#CloudflareZonesResponse>)
- [type CloudflareZonesResponseResult](<#CloudflareZonesResponseResult>)
- [type DnsProviderClient](<#DnsProviderClient>)
  - [func NewDnsProviderClient\(ctx context.Context, cfg schema.QuartzConfig, secrets schema.QuartzSecrets\) \(DnsProviderClient, error\)](<#NewDnsProviderClient>)
- [type DynamodbClient](<#DynamodbClient>)
- [type EksClient](<#EksClient>)
- [type EksToken](<#EksToken>)
- [type EmptyProvider](<#EmptyProvider>)
  - [func NewEmptyProvider\(name string, err error\) EmptyProvider](<#NewEmptyProvider>)
  - [func \(c EmptyProvider\) CheckAccess\(ctx context.Context\) ProviderCheckResult](<#EmptyProvider.CheckAccess>)
  - [func \(c EmptyProvider\) ProviderName\(\) string](<#EmptyProvider.ProviderName>)
- [type EmptyProviderCheckResult](<#EmptyProviderCheckResult>)
  - [func \(r EmptyProviderCheckResult\) ToTable\(\) \(\[\]string, \[\]ProviderCheckResultRow\)](<#EmptyProviderCheckResult.ToTable>)
- [type GithubCheckAccessResult](<#GithubCheckAccessResult>)
- [type GithubClient](<#GithubClient>)
  - [func NewGithubClient\(httpClient util.HttpClientFactory, providerName string, cfg schema.QuartzConfig, creds schema.GithubCredentials\) \(GithubClient, error\)](<#NewGithubClient>)
  - [func \(c GithubClient\) CheckAccess\(ctx context.Context\) ProviderCheckResult](<#GithubClient.CheckAccess>)
  - [func \(c GithubClient\) CheckGithubRepoAccess\(ctx context.Context\) \(\[\]GithubCheckAccessResult, error\)](<#GithubClient.CheckGithubRepoAccess>)
  - [func \(c GithubClient\) ProviderName\(\) string](<#GithubClient.ProviderName>)
  - [func \(c GithubClient\) Repositories\(\) \[\]schema.RepositoryConfig](<#GithubClient.Repositories>)
- [type GithubProviderCheckResult](<#GithubProviderCheckResult>)
  - [func \(r GithubProviderCheckResult\) ToTable\(\) \(\[\]string, \[\]ProviderCheckResultRow\)](<#GithubProviderCheckResult.ToTable>)
- [type GithubTokenSource](<#GithubTokenSource>)
- [type IamClient](<#IamClient>)
- [type IronbankCheckAccessResult](<#IronbankCheckAccessResult>)
  - [func \(r IronbankCheckAccessResult\) ToTable\(\) \(\[\]string, \[\]ProviderCheckResultRow\)](<#IronbankCheckAccessResult.ToTable>)
- [type IronbankClient](<#IronbankClient>)
  - [func NewIronbankClient\(httpClient util.HttpClientFactory, providerName string, username string, password string\) \(\*IronbankClient, error\)](<#NewIronbankClient>)
  - [func \(c \*IronbankClient\) CheckAccess\(ctx context.Context\) ProviderCheckResult](<#IronbankClient.CheckAccess>)
  - [func \(c \*IronbankClient\) ProviderName\(\) string](<#IronbankClient.ProviderName>)
- [type KubeconfigInfo](<#KubeconfigInfo>)
  - [func \(kc KubeconfigInfo\) Kubeconfig\(cfg quartzSchema.QuartzConfig\) quartzSchema.Kubeconfig](<#KubeconfigInfo.Kubeconfig>)
  - [func \(kc KubeconfigInfo\) ToKubeconfigYamlBytes\(cfg quartzSchema.QuartzConfig\) \[\]byte](<#KubeconfigInfo.ToKubeconfigYamlBytes>)
- [type KubernetesApi](<#KubernetesApi>)
  - [func NewKubernetesApi\(ctx context.Context, cfg quartzSchema.QuartzConfig, i \*KubeconfigInfo\) \(KubernetesApi, error\)](<#NewKubernetesApi>)
- [type KubernetesApiImpl](<#KubernetesApiImpl>)
  - [func \(api KubernetesApiImpl\) ClientSet\(\) \(kubernetes.Interface, error\)](<#KubernetesApiImpl.ClientSet>)
  - [func \(api KubernetesApiImpl\) DiscoveryClient\(\) \(discovery.DiscoveryInterface, error\)](<#KubernetesApiImpl.DiscoveryClient>)
  - [func \(api KubernetesApiImpl\) DynamicClient\(\) \(dynamic.Interface, error\)](<#KubernetesApiImpl.DynamicClient>)
- [type KubernetesApiMock](<#KubernetesApiMock>)
  - [func NewKubernetesApiMock\(\) \*KubernetesApiMock](<#NewKubernetesApiMock>)
  - [func \(api \*KubernetesApiMock\) AddResources\(res ...\*metav1.APIResourceList\) \*KubernetesApiMock](<#KubernetesApiMock.AddResources>)
  - [func \(api KubernetesApiMock\) ClientSet\(\) \(kubernetes.Interface, error\)](<#KubernetesApiMock.ClientSet>)
  - [func \(api KubernetesApiMock\) DiscoveryClient\(\) \(discovery.DiscoveryInterface, error\)](<#KubernetesApiMock.DiscoveryClient>)
  - [func \(api KubernetesApiMock\) DynamicClient\(\) \(dynamic.Interface, error\)](<#KubernetesApiMock.DynamicClient>)
  - [func \(api \*KubernetesApiMock\) WithClientObjects\(objects ...runtime.Object\) \*KubernetesApiMock](<#KubernetesApiMock.WithClientObjects>)
  - [func \(api \*KubernetesApiMock\) WithDynamicObjects\(objects ...runtime.Object\) \*KubernetesApiMock](<#KubernetesApiMock.WithDynamicObjects>)
  - [func \(api \*KubernetesApiMock\) WithError\(err error\) \*KubernetesApiMock](<#KubernetesApiMock.WithError>)
- [type KubernetesAppConnectionInfo](<#KubernetesAppConnectionInfo>)
- [type KubernetesClient](<#KubernetesClient>)
  - [func NewKubernetesClient\(api KubernetesApi, kubeconfig KubeconfigInfo, cfg quartzSchema.QuartzConfig\) \(KubernetesClient, error\)](<#NewKubernetesClient>)
  - [func \(c KubernetesClient\) CheckAccess\(ctx context.Context\) ProviderCheckResult](<#KubernetesClient.CheckAccess>)
  - [func \(c KubernetesClient\) EnsureKubeconfig\(path string\) error](<#KubernetesClient.EnsureKubeconfig>)
  - [func \(c KubernetesClient\) Export\(ctx context.Context, cfg quartzSchema.ExportConfig\) \(map\[string\]\[\]byte, error\)](<#KubernetesClient.Export>)
  - [func \(c KubernetesClient\) ForEachDynamicResources\(ctx context.Context, kind schema.GroupVersionResource, ns string, onEachItem func\(unstructured.Unstructured\)\) error](<#KubernetesClient.ForEachDynamicResources>)
  - [func \(c KubernetesClient\) GetAppConnectionInfo\(ctx context.Context, name string, opts quartzSchema.ApplicationLookupConfig\) KubernetesAppConnectionInfo](<#KubernetesClient.GetAppConnectionInfo>)
  - [func \(c KubernetesClient\) GetConfigMapValue\(ctx context.Context, ns string, name string\) \(map\[string\]string, error\)](<#KubernetesClient.GetConfigMapValue>)
  - [func \(c KubernetesClient\) GetDynamicResource\(ctx context.Context, kind schema.GroupVersionResource, ns string, name string\) \(map\[string\]interface\{\}, error\)](<#KubernetesClient.GetDynamicResource>)
  - [func \(c KubernetesClient\) GetSecret\(ctx context.Context, ns string, name string\) \(\*corev1.Secret, error\)](<#KubernetesClient.GetSecret>)
  - [func \(c KubernetesClient\) GetSecretValue\(ctx context.Context, ns string, name string\) \(map\[string\]string, error\)](<#KubernetesClient.GetSecretValue>)
  - [func \(c KubernetesClient\) LookupKind\(ctx context.Context, kind string\) \(schema.GroupVersionResource, error\)](<#KubernetesClient.LookupKind>)
  - [func \(c KubernetesClient\) PrintClusterAppInfo\(ctx context.Context, apps map\[string\]quartzSchema.ApplicationLookupConfig\)](<#KubernetesClient.PrintClusterAppInfo>)
  - [func \(c KubernetesClient\) PrintClusterInfo\(ctx context.Context\)](<#KubernetesClient.PrintClusterInfo>)
  - [func \(c KubernetesClient\) ProviderName\(\) string](<#KubernetesClient.ProviderName>)
  - [func \(c KubernetesClient\) RefreshExternalSecrets\(ctx context.Context\) \(\[\]KubernetesResource, error\)](<#KubernetesClient.RefreshExternalSecrets>)
  - [func \(c KubernetesClient\) Restart\(ctx context.Context, kind schema.GroupVersionResource, ns string, name string\) error](<#KubernetesClient.Restart>)
  - [func \(c KubernetesClient\) Update\(ctx context.Context, kind schema.GroupVersionResource, ns string, obj \*unstructured.Unstructured\) \(\*unstructured.Unstructured, error\)](<#KubernetesClient.Update>)
  - [func \(c KubernetesClient\) WaitConditionState\(ctx context.Context, kind schema.GroupVersionResource, ns string, name string, state string, timeoutSeconds int\) error](<#KubernetesClient.WaitConditionState>)
  - [func \(c KubernetesClient\) WriteKubeconfig\(w io.Writer\) error](<#KubernetesClient.WriteKubeconfig>)
  - [func \(c KubernetesClient\) WriteKubeconfigFile\(path string\) error](<#KubernetesClient.WriteKubeconfigFile>)
- [type KubernetesLookupCache](<#KubernetesLookupCache>)
- [type KubernetesProviderCheckResult](<#KubernetesProviderCheckResult>)
  - [func \(r KubernetesProviderCheckResult\) ToTable\(\) \(\[\]string, \[\]ProviderCheckResultRow\)](<#KubernetesProviderCheckResult.ToTable>)
- [type KubernetesProviderClient](<#KubernetesProviderClient>)
- [type KubernetesResource](<#KubernetesResource>)
- [type LazyAwsSdkClient](<#LazyAwsSdkClient>)
  - [func \(c \*LazyAwsSdkClient\) Dynamodb\(\) DynamodbClient](<#LazyAwsSdkClient.Dynamodb>)
  - [func \(c \*LazyAwsSdkClient\) Eks\(\) EksClient](<#LazyAwsSdkClient.Eks>)
  - [func \(c \*LazyAwsSdkClient\) EksTokenGenerator\(\) \(token.Generator, error\)](<#LazyAwsSdkClient.EksTokenGenerator>)
  - [func \(c \*LazyAwsSdkClient\) Iam\(\) IamClient](<#LazyAwsSdkClient.Iam>)
  - [func \(c \*LazyAwsSdkClient\) S3\(\) S3Client](<#LazyAwsSdkClient.S3>)
  - [func \(c \*LazyAwsSdkClient\) S3Region\(region string\) S3Client](<#LazyAwsSdkClient.S3Region>)
  - [func \(c \*LazyAwsSdkClient\) Sts\(\) StsClient](<#LazyAwsSdkClient.Sts>)
- [type LocalClient](<#LocalClient>)
  - [func \(c LocalClient\) CheckAccess\(ctx context.Context\) ProviderCheckResult](<#LocalClient.CheckAccess>)
  - [func \(c LocalClient\) CheckConfig\(\) error](<#LocalClient.CheckConfig>)
  - [func \(c LocalClient\) CreateStateBackend\(\_ context.Context\) error](<#LocalClient.CreateStateBackend>)
  - [func \(c LocalClient\) CurrentIdentity\(ctx context.Context\) \(CloudProviderIdentity, error\)](<#LocalClient.CurrentIdentity>)
  - [func \(c LocalClient\) DestroyStateBackend\(\_ context.Context\) error](<#LocalClient.DestroyStateBackend>)
  - [func \(c LocalClient\) KubeconfigInfo\(ctx context.Context\) \(KubeconfigInfo, error\)](<#LocalClient.KubeconfigInfo>)
  - [func \(c LocalClient\) PrepareAccount\(ctx context.Context\) error](<#LocalClient.PrepareAccount>)
  - [func \(c LocalClient\) PrintClusterInfo\(ctx context.Context\) error](<#LocalClient.PrintClusterInfo>)
  - [func \(c LocalClient\) PrintConfig\(\)](<#LocalClient.PrintConfig>)
  - [func \(c LocalClient\) ProviderName\(\) string](<#LocalClient.ProviderName>)
  - [func \(c LocalClient\) StateBackendInfo\(\_ string\) CloudProviderStateBackend](<#LocalClient.StateBackendInfo>)
- [type Provider](<#Provider>)
  - [func NewImageRegistryProviderClient\(ctx context.Context, cfg schema.QuartzConfig, secrets schema.QuartzSecrets\) \(Provider, error\)](<#NewImageRegistryProviderClient>)
  - [func NewSourceControlProviderClient\(ctx context.Context, cfg schema.QuartzConfig, secrets schema.QuartzSecrets\) \(Provider, error\)](<#NewSourceControlProviderClient>)
- [type ProviderCheckOpts](<#ProviderCheckOpts>)
  - [func NewProviderCheckOpts\(ctx context.Context, f ProviderFactory\) ProviderCheckOpts](<#NewProviderCheckOpts>)
- [type ProviderCheckResult](<#ProviderCheckResult>)
- [type ProviderCheckResultRow](<#ProviderCheckResultRow>)
- [type ProviderFactory](<#ProviderFactory>)
  - [func NewProviderFactory\(cfg schema.QuartzConfig, secrets schema.QuartzSecrets, opts ...ProviderFactoryOption\) \*ProviderFactory](<#NewProviderFactory>)
  - [func \(f \*ProviderFactory\) Cloud\(ctx context.Context\) \(CloudProviderClient, error\)](<#ProviderFactory.Cloud>)
  - [func \(f \*ProviderFactory\) Dns\(ctx context.Context\) \(DnsProviderClient, error\)](<#ProviderFactory.Dns>)
  - [func \(f \*ProviderFactory\) ImageRegistry\(ctx context.Context\) \(Provider, error\)](<#ProviderFactory.ImageRegistry>)
  - [func \(f \*ProviderFactory\) Kubernetes\(ctx context.Context\) \(KubernetesProviderClient, error\)](<#ProviderFactory.Kubernetes>)
  - [func \(f \*ProviderFactory\) SourceControl\(ctx context.Context\) \(Provider, error\)](<#ProviderFactory.SourceControl>)
- [type ProviderFactoryOption](<#ProviderFactoryOption>)
  - [func WithCloudProvider\(p CloudProviderClient\) ProviderFactoryOption](<#WithCloudProvider>)
  - [func WithConfig\(c schema.QuartzConfig\) ProviderFactoryOption](<#WithConfig>)
  - [func WithDnsProvider\(p DnsProviderClient\) ProviderFactoryOption](<#WithDnsProvider>)
  - [func WithImageRegistryProvider\(p Provider\) ProviderFactoryOption](<#WithImageRegistryProvider>)
  - [func WithKubernetesProvider\(p KubernetesProviderClient\) ProviderFactoryOption](<#WithKubernetesProvider>)
  - [func WithSecrets\(s schema.QuartzSecrets\) ProviderFactoryOption](<#WithSecrets>)
  - [func WithSourceControlProvider\(p Provider\) ProviderFactoryOption](<#WithSourceControlProvider>)
- [type S3Client](<#S3Client>)
- [type StsClient](<#StsClient>)


## Constants

<a name="AWS_PROVIDER"></a>

```go
const (
    AWS_PROVIDER = "AWS"
)
```

<a name="Check"></a>
## func Check

```go
func Check(ctx context.Context, opts *ProviderCheckOpts)
```

Check performs access checks for all providers in the given options. It logs the results and execution statistics.

<a name="AwsClient"></a>
## type AwsClient

AwsClient represents an AWS client with configuration and SDK factory. It provides methods to interact with AWS services.

```go
type AwsClient struct {
    // contains filtered or unexported fields
}
```

<a name="NewAwsClient"></a>
### func NewAwsClient

```go
func NewAwsClient(id string, region string, cfg aws.Config, sdk AwsSdkClientFactory) AwsClient
```



<a name="NewLazyAwsClient"></a>
### func NewLazyAwsClient

```go
func NewLazyAwsClient(ctx context.Context, id string, region string) (AwsClient, error)
```



<a name="AwsClient.BucketExists"></a>
### func \(\*AwsClient\) BucketExists

```go
func (c *AwsClient) BucketExists(ctx context.Context, name string) (bool, error)
```

BucketExists checks if an S3 bucket with the specified name exists. It returns true if the bucket exists, false otherwise, and an error if the operation fails.

<a name="AwsClient.CheckAccess"></a>
### func \(AwsClient\) CheckAccess

```go
func (c AwsClient) CheckAccess(ctx context.Context) ProviderCheckResult
```



<a name="AwsClient.CheckConfig"></a>
### func \(AwsClient\) CheckConfig

```go
func (c AwsClient) CheckConfig() error
```



<a name="AwsClient.CreateBucket"></a>
### func \(AwsClient\) CreateBucket

```go
func (c AwsClient) CreateBucket(ctx context.Context, name string, force bool) error
```

CreateBucket creates an S3 bucket with the specified name. If the bucket already exists and \`force\` is false, the operation is skipped.

<a name="AwsClient.CreateDynamodbTable"></a>
### func \(\*AwsClient\) CreateDynamodbTable

```go
func (c *AwsClient) CreateDynamodbTable(ctx context.Context, name string, force bool) error
```

CreateDynamodbTable creates a DynamoDB table with the specified name. If the table already exists and \`force\` is false, the operation is skipped.

<a name="AwsClient.CreateStateBackend"></a>
### func \(AwsClient\) CreateStateBackend

```go
func (c AwsClient) CreateStateBackend(ctx context.Context) error
```



<a name="AwsClient.CurrentIdentity"></a>
### func \(AwsClient\) CurrentIdentity

```go
func (c AwsClient) CurrentIdentity(ctx context.Context) (CloudProviderIdentity, error)
```



<a name="AwsClient.DescribeEksCluster"></a>
### func \(\*AwsClient\) DescribeEksCluster

```go
func (c *AwsClient) DescribeEksCluster(ctx context.Context) (*eks.DescribeClusterOutput, error)
```

DescribeEksCluster describes the EKS cluster associated with the client. It returns the cluster details or an error if the operation fails.

<a name="AwsClient.DestroyBucket"></a>
### func \(\*AwsClient\) DestroyBucket

```go
func (c *AwsClient) DestroyBucket(ctx context.Context, name string) error
```

DestroyBucket deletes an S3 bucket with the specified name. The bucket must be empty before it can be deleted.

<a name="AwsClient.DestroyDynamodbTable"></a>
### func \(\*AwsClient\) DestroyDynamodbTable

```go
func (c *AwsClient) DestroyDynamodbTable(ctx context.Context, name string) error
```

DestroyDynamodbTable deletes a DynamoDB table with the specified name.

<a name="AwsClient.DestroyStateBackend"></a>
### func \(AwsClient\) DestroyStateBackend

```go
func (c AwsClient) DestroyStateBackend(ctx context.Context) error
```



<a name="AwsClient.DynamodbTableExists"></a>
### func \(\*AwsClient\) DynamodbTableExists

```go
func (c *AwsClient) DynamodbTableExists(ctx context.Context, name string, d time.Duration) bool
```

DynamodbTableExists checks if a DynamoDB table with the specified name exists within the given duration.

<a name="AwsClient.EksKubeconfigInfo"></a>
### func \(\*AwsClient\) EksKubeconfigInfo

```go
func (c *AwsClient) EksKubeconfigInfo(ctx context.Context) (KubeconfigInfo, EksToken, error)
```

EksKubeconfigInfo retrieves the kubeconfig information for an EKS cluster. It returns the kubeconfig details, an EKS token, and an error if any occurs.

<a name="AwsClient.KubeconfigInfo"></a>
### func \(AwsClient\) KubeconfigInfo

```go
func (c AwsClient) KubeconfigInfo(ctx context.Context) (KubeconfigInfo, error)
```



<a name="AwsClient.PrepareAccount"></a>
### func \(AwsClient\) PrepareAccount

```go
func (c AwsClient) PrepareAccount(ctx context.Context) error
```



<a name="AwsClient.PrintClusterInfo"></a>
### func \(AwsClient\) PrintClusterInfo

```go
func (c AwsClient) PrintClusterInfo(ctx context.Context) error
```



<a name="AwsClient.PrintConfig"></a>
### func \(AwsClient\) PrintConfig

```go
func (c AwsClient) PrintConfig()
```



<a name="AwsClient.ProviderName"></a>
### func \(AwsClient\) ProviderName

```go
func (c AwsClient) ProviderName() string
```

ProviderName returns the name of the cloud provider \("AWS"\).

<a name="AwsClient.StateBackendInfo"></a>
### func \(AwsClient\) StateBackendInfo

```go
func (c AwsClient) StateBackendInfo(stage string) CloudProviderStateBackend
```



<a name="AwsProviderCheckResult"></a>
## type AwsProviderCheckResult



```go
type AwsProviderCheckResult struct {
    Identity CloudProviderIdentity
    Error    error
}
```

<a name="AwsProviderCheckResult.ToTable"></a>
### func \(AwsProviderCheckResult\) ToTable

```go
func (r AwsProviderCheckResult) ToTable() ([]string, []ProviderCheckResultRow)
```



<a name="AwsSdkClientFactory"></a>
## type AwsSdkClientFactory

AwsSdkClientFactory defines the interface for creating AWS SDK clients.

```go
type AwsSdkClientFactory interface {
    Sts() StsClient
    Iam() IamClient
    Dynamodb() DynamodbClient
    S3() S3Client
    S3Region(region string) S3Client
    Eks() EksClient
    EksTokenGenerator() (token.Generator, error)
}
```

<a name="CloudProviderClient"></a>
## type CloudProviderClient

CloudProviderClient defines the interface for cloud provider clients.

```go
type CloudProviderClient interface {
    Provider
    // CheckConfig validates the cloud provider configuration.
    CheckConfig() error
    // CurrentIdentity retrieves the current identity of the cloud provider account.
    CurrentIdentity(ctx context.Context) (CloudProviderIdentity, error)
    // StateBackendInfo retrieves information about the state backend for the specified stage.
    StateBackendInfo(stage string) CloudProviderStateBackend
    // CreateStateBackend creates the state backend for the cloud provider.
    CreateStateBackend(ctx context.Context) error
    // DestroyStateBackend destroys the state backend for the cloud provider.
    DestroyStateBackend(ctx context.Context) error
    // KubeconfigInfo retrieves the kubeconfig information for the cloud provider.
    KubeconfigInfo(ctx context.Context) (KubeconfigInfo, error)
    // PrintConfig prints the cloud provider configuration.
    PrintConfig()
    // PrintClusterInfo prints information about the cloud provider's cluster.
    PrintClusterInfo(ctx context.Context) error
    // PrepareAccount prepares the cloud provider account for use.
    PrepareAccount(ctx context.Context) error
}
```

<a name="NewCloudProviderClient"></a>
### func NewCloudProviderClient

```go
func NewCloudProviderClient(ctx context.Context, cfg schema.QuartzConfig) (CloudProviderClient, error)
```

NewCloudProviderClient creates a new cloud provider client using the provided Quartz configuration.

<a name="NewCloudProviderClientWithOpts"></a>
### func NewCloudProviderClientWithOpts

```go
func NewCloudProviderClientWithOpts(ctx context.Context, o CloudProviderClientOpts) (CloudProviderClient, error)
```

NewCloudProviderClientWithOpts creates a new cloud provider client using the specified options.

<a name="CloudProviderClientOpts"></a>
## type CloudProviderClientOpts

CloudProviderClientOpts contains options for creating a cloud provider client.

```go
type CloudProviderClientOpts struct {
    Provider string // The name of the cloud provider (e.g., "aws", "local").
    Name     string // The name of the cloud provider client.
    Region   string // The region for the cloud provider.
    // contains filtered or unexported fields
}
```

<a name="CloudProviderIdentity"></a>
## type CloudProviderIdentity

CloudProviderIdentity represents the identity of a cloud provider account.

```go
type CloudProviderIdentity struct {
    AccountId   string // The account ID of the cloud provider.
    AccountName string // The account name of the cloud provider.
    UserId      string // The user ID of the cloud provider account.
    UserName    string // The user name of the cloud provider account.
}
```

<a name="CloudProviderStateBackend"></a>
## type CloudProviderStateBackend

CloudProviderStateBackend represents the state backend configuration for a cloud provider.

```go
type CloudProviderStateBackend struct {
    Name              string   // The name of the state backend.
    InitBackendConfig []string // The initialization configuration for the state backend.
}
```

<a name="CloudflareAccessCheckResult"></a>
## type CloudflareAccessCheckResult

CloudflareAccessCheckResult represents the result of a Cloudflare access check.

```go
type CloudflareAccessCheckResult struct {
    Status   bool                    // Indicates whether the access check was successful.
    Error    error                   // Contains any error encountered during the check.
    Response CloudflareZonesResponse // The response from the Cloudflare API.
}
```

<a name="CloudflareAccessCheckResult.ToTable"></a>
### func \(CloudflareAccessCheckResult\) ToTable

```go
func (r CloudflareAccessCheckResult) ToTable() ([]string, []ProviderCheckResultRow)
```

ToTable converts the CloudflareAccessCheckResult into table headers and rows for display.

<a name="CloudflareClient"></a>
## type CloudflareClient

CloudflareClient represents a client for interacting with the Cloudflare API.

```go
type CloudflareClient struct {
    // contains filtered or unexported fields
}
```

<a name="NewCloudflareClient"></a>
### func NewCloudflareClient

```go
func NewCloudflareClient(httpClient util.HttpClientFactory, providerName string, accountId string, apiToken string, domain string) (CloudflareClient, error)
```

NewCloudflareClient creates a new CloudflareClient instance. Returns an error if required parameters \(accountId, apiToken, or domain\) are missing.

<a name="CloudflareClient.CheckAccess"></a>
### func \(CloudflareClient\) CheckAccess

```go
func (c CloudflareClient) CheckAccess(ctx context.Context) ProviderCheckResult
```

CheckAccess checks access to the Cloudflare API for the specified domain and account. It verifies the required permissions and returns the result as a CloudflareAccessCheckResult.

<a name="CloudflareClient.ProviderName"></a>
### func \(CloudflareClient\) ProviderName

```go
func (c CloudflareClient) ProviderName() string
```

ProviderName returns the name of the Cloudflare provider.

<a name="CloudflareZonesResponse"></a>
## type CloudflareZonesResponse

CloudflareZonesResponse represents the response from the Cloudflare API for zones.

```go
type CloudflareZonesResponse struct {
    Success  bool                            // Indicates whether the API call was successful.
    Errors   []string                        // Contains any errors returned by the API.
    Messages []string                        // Contains any messages returned by the API.
    Result   []CloudflareZonesResponseResult // The list of zones returned by the API.
}
```

<a name="CloudflareZonesResponseResult"></a>
## type CloudflareZonesResponseResult

CloudflareZonesResponseResult represents a single zone in the Cloudflare API response.

```go
type CloudflareZonesResponseResult struct {
    Id          string   // The ID of the zone.
    Name        string   // The name of the zone.
    Permissions []string // The permissions associated with the zone.
}
```

<a name="DnsProviderClient"></a>
## type DnsProviderClient

DnsProviderClient defines the interface for DNS provider clients.

```go
type DnsProviderClient interface {
    Provider
}
```

<a name="NewDnsProviderClient"></a>
### func NewDnsProviderClient

```go
func NewDnsProviderClient(ctx context.Context, cfg schema.QuartzConfig, secrets schema.QuartzSecrets) (DnsProviderClient, error)
```

NewDnsProviderClient creates a new DNS provider client based on the provided configuration and secrets. If the test mode is enabled, it returns a TestDnsProviderClient. Otherwise, it initializes the appropriate DNS provider client.

<a name="DynamodbClient"></a>
## type DynamodbClient

DynamodbClient defines the interface for interacting with AWS DynamoDB.

```go
type DynamodbClient interface {
    dynamodb.DescribeTableAPIClient
    CreateTable(ctx context.Context, params *dynamodb.CreateTableInput, optFns ...func(*dynamodb.Options)) (*dynamodb.CreateTableOutput, error)
    DeleteTable(ctx context.Context, params *dynamodb.DeleteTableInput, optFns ...func(*dynamodb.Options)) (*dynamodb.DeleteTableOutput, error)
}
```

<a name="EksClient"></a>
## type EksClient

EksClient defines the interface for interacting with AWS EKS.

```go
type EksClient interface {
    DescribeCluster(ctx context.Context, params *eks.DescribeClusterInput, optFns ...func(*eks.Options)) (*eks.DescribeClusterOutput, error)
}
```

<a name="EksToken"></a>
## type EksToken

EksToken represents an EKS authentication token and its JSON representation.

```go
type EksToken struct {
    Token      token.Token // The EKS authentication token.
    JsonString string      // The JSON representation of the token.
}
```

<a name="EmptyProvider"></a>
## type EmptyProvider

EmptyProvider represents a placeholder provider with no functionality.

```go
type EmptyProvider struct {
    Name  string // The name of the provider.
    Error error  // The error associated with the provider, if any.
}
```

<a name="NewEmptyProvider"></a>
### func NewEmptyProvider

```go
func NewEmptyProvider(name string, err error) EmptyProvider
```

NewEmptyProvider creates a new instance of EmptyProvider with the specified name and error.

<a name="EmptyProvider.CheckAccess"></a>
### func \(EmptyProvider\) CheckAccess

```go
func (c EmptyProvider) CheckAccess(ctx context.Context) ProviderCheckResult
```

CheckAccess performs an access check for the EmptyProvider. It always returns an EmptyProviderCheckResult with the associated error.

<a name="EmptyProvider.ProviderName"></a>
### func \(EmptyProvider\) ProviderName

```go
func (c EmptyProvider) ProviderName() string
```

ProviderName returns the name of the EmptyProvider.

<a name="EmptyProviderCheckResult"></a>
## type EmptyProviderCheckResult

EmptyProviderCheckResult represents the result of a check for an EmptyProvider.

```go
type EmptyProviderCheckResult struct {
    Error error // The error associated with the check result, if any.
}
```

<a name="EmptyProviderCheckResult.ToTable"></a>
### func \(EmptyProviderCheckResult\) ToTable

```go
func (r EmptyProviderCheckResult) ToTable() ([]string, []ProviderCheckResultRow)
```

ToTable converts the EmptyProviderCheckResult into table headers and rows for display.

<a name="GithubCheckAccessResult"></a>
## type GithubCheckAccessResult

GithubCheckAccessResult represents the result of a GitHub repository access check.

```go
type GithubCheckAccessResult struct {
    Organization string // The organization name.
    Repository   string // The repository name.
    Error        error  // Any error encountered during the access check.

    Name     string // The full name of the repository.
    Pull     bool   // Indicates if the user has pull access.
    Push     bool   // Indicates if the user has push access.
    Triage   bool   // Indicates if the user has triage access.
    Maintain bool   // Indicates if the user has maintain access.
    Admin    bool   // Indicates if the user has admin access.
    Packages bool   // Indicates if the user has access to packages.
}
```

<a name="GithubClient"></a>
## type GithubClient

GithubClient represents a client for interacting with the GitHub API.

```go
type GithubClient struct {
    // contains filtered or unexported fields
}
```

<a name="NewGithubClient"></a>
### func NewGithubClient

```go
func NewGithubClient(httpClient util.HttpClientFactory, providerName string, cfg schema.QuartzConfig, creds schema.GithubCredentials) (GithubClient, error)
```

NewGithubClient creates a new GitHub client with the specified configuration and credentials. Returns an error if the credentials are missing.

<a name="GithubClient.CheckAccess"></a>
### func \(GithubClient\) CheckAccess

```go
func (c GithubClient) CheckAccess(ctx context.Context) ProviderCheckResult
```

CheckAccess performs an access check for the GitHub provider. It returns a GithubProviderCheckResult containing the results of the check.

<a name="GithubClient.CheckGithubRepoAccess"></a>
### func \(GithubClient\) CheckGithubRepoAccess

```go
func (c GithubClient) CheckGithubRepoAccess(ctx context.Context) ([]GithubCheckAccessResult, error)
```

CheckGithubRepoAccess checks access to the configured GitHub repositories. It returns a list of GithubCheckAccessResult and an error if any issues are encountered.

<a name="GithubClient.ProviderName"></a>
### func \(GithubClient\) ProviderName

```go
func (c GithubClient) ProviderName() string
```

ProviderName returns the name of the GitHub provider.

<a name="GithubClient.Repositories"></a>
### func \(GithubClient\) Repositories

```go
func (c GithubClient) Repositories() []schema.RepositoryConfig
```

Repositories retrieves the list of repositories configured in the Quartz configuration.

<a name="GithubProviderCheckResult"></a>
## type GithubProviderCheckResult

GithubProviderCheckResult represents the result of a GitHub provider check.

```go
type GithubProviderCheckResult struct {
    Status  bool                      // Indicates if the check was successful.
    Results []GithubCheckAccessResult // The results of the access checks.
    Error   error                     // Any error encountered during the check.
}
```

<a name="GithubProviderCheckResult.ToTable"></a>
### func \(GithubProviderCheckResult\) ToTable

```go
func (r GithubProviderCheckResult) ToTable() ([]string, []ProviderCheckResultRow)
```

ToTable converts the GithubProviderCheckResult into table headers and rows for display.

<a name="GithubTokenSource"></a>
## type GithubTokenSource

GithubTokenSource represents a source for GitHub access tokens.

```go
type GithubTokenSource struct {
    AccessToken string // The GitHub access token.
}
```

<a name="IamClient"></a>
## type IamClient

IamClient defines the interface for interacting with AWS IAM.

```go
type IamClient interface {
    ListAccountAliases(ctx context.Context, params *iam.ListAccountAliasesInput, optFns ...func(*iam.Options)) (*iam.ListAccountAliasesOutput, error)
    CreateServiceLinkedRole(ctx context.Context, params *iam.CreateServiceLinkedRoleInput, optFns ...func(*iam.Options)) (*iam.CreateServiceLinkedRoleOutput, error)
}
```

<a name="IronbankCheckAccessResult"></a>
## type IronbankCheckAccessResult

IronbankCheckAccessResult represents the result of an Ironbank access check.

```go
type IronbankCheckAccessResult struct {
    StatusCode int    // The HTTP status code returned by the Ironbank API.
    Username   string // The username used for the access check.
    Error      error  // Any error encountered during the access check.
}
```

<a name="IronbankCheckAccessResult.ToTable"></a>
### func \(IronbankCheckAccessResult\) ToTable

```go
func (r IronbankCheckAccessResult) ToTable() ([]string, []ProviderCheckResultRow)
```

ToTable converts the IronbankCheckAccessResult into table headers and rows for display.

<a name="IronbankClient"></a>
## type IronbankClient

IronbankClient represents a client for interacting with the Ironbank API.

```go
type IronbankClient struct {
    // contains filtered or unexported fields
}
```

<a name="NewIronbankClient"></a>
### func NewIronbankClient

```go
func NewIronbankClient(httpClient util.HttpClientFactory, providerName string, username string, password string) (*IronbankClient, error)
```

NewIronbankClient creates a new IronbankClient instance with the specified credentials. Returns an error if the username or password is missing.

<a name="IronbankClient.CheckAccess"></a>
### func \(\*IronbankClient\) CheckAccess

```go
func (c *IronbankClient) CheckAccess(ctx context.Context) ProviderCheckResult
```

CheckAccess performs an access check against the Ironbank API. It returns an IronbankCheckAccessResult containing the result of the check.

<a name="IronbankClient.ProviderName"></a>
### func \(\*IronbankClient\) ProviderName

```go
func (c *IronbankClient) ProviderName() string
```

ProviderName returns the name of the Ironbank provider.

<a name="KubeconfigInfo"></a>
## type KubeconfigInfo

KubeconfigInfo contains information about the Kubernetes configuration.

```go
type KubeconfigInfo struct {
    Cluster              string
    Context              string
    User                 string
    Endpoint             string
    CertificateAuthority string
    Token                string
    Expiration           time.Time
}
```

<a name="KubeconfigInfo.Kubeconfig"></a>
### func \(KubeconfigInfo\) Kubeconfig

```go
func (kc KubeconfigInfo) Kubeconfig(cfg quartzSchema.QuartzConfig) quartzSchema.Kubeconfig
```

Kubeconfig converts the KubeconfigInfo to a Kubeconfig structure.

<a name="KubeconfigInfo.ToKubeconfigYamlBytes"></a>
### func \(KubeconfigInfo\) ToKubeconfigYamlBytes

```go
func (kc KubeconfigInfo) ToKubeconfigYamlBytes(cfg quartzSchema.QuartzConfig) []byte
```

ToKubeconfigYamlBytes converts the KubeconfigInfo to YAML bytes.

<a name="KubernetesApi"></a>
## type KubernetesApi

KubernetesApi defines the interface for interacting with Kubernetes APIs.

```go
type KubernetesApi interface {
    // ClientSet returns a Kubernetes clientset for interacting with core Kubernetes resources.
    ClientSet() (kubernetes.Interface, error)
    // DynamicClient returns a dynamic Kubernetes client for interacting with unstructured resources.
    DynamicClient() (dynamic.Interface, error)
    // DiscoveryClient returns a discovery client for querying API server metadata.
    DiscoveryClient() (discovery.DiscoveryInterface, error)
}
```

<a name="NewKubernetesApi"></a>
### func NewKubernetesApi

```go
func NewKubernetesApi(ctx context.Context, cfg quartzSchema.QuartzConfig, i *KubeconfigInfo) (KubernetesApi, error)
```

NewKubernetesApi creates a new KubernetesApi instance using the provided configuration and kubeconfig information. If test mode is enabled, it returns a mock implementation.

<a name="KubernetesApiImpl"></a>
## type KubernetesApiImpl

KubernetesApiImpl is an implementation of KubernetesApi using a REST configuration.

```go
type KubernetesApiImpl struct {
    // contains filtered or unexported fields
}
```

<a name="KubernetesApiImpl.ClientSet"></a>
### func \(KubernetesApiImpl\) ClientSet

```go
func (api KubernetesApiImpl) ClientSet() (kubernetes.Interface, error)
```

ClientSet returns a Kubernetes clientset for interacting with core Kubernetes resources.

<a name="KubernetesApiImpl.DiscoveryClient"></a>
### func \(KubernetesApiImpl\) DiscoveryClient

```go
func (api KubernetesApiImpl) DiscoveryClient() (discovery.DiscoveryInterface, error)
```

DiscoveryClient returns a discovery client for querying API server metadata.

<a name="KubernetesApiImpl.DynamicClient"></a>
### func \(KubernetesApiImpl\) DynamicClient

```go
func (api KubernetesApiImpl) DynamicClient() (dynamic.Interface, error)
```

DynamicClient returns a dynamic Kubernetes client for interacting with unstructured resources.

<a name="KubernetesApiMock"></a>
## type KubernetesApiMock

KubernetesApiMock is a mock implementation of the IKubernetesApi interface for testing purposes.

```go
type KubernetesApiMock struct {
    // contains filtered or unexported fields
}
```

<a name="NewKubernetesApiMock"></a>
### func NewKubernetesApiMock

```go
func NewKubernetesApiMock() *KubernetesApiMock
```

NewKubernetesApiMock creates a new instance of KubernetesApiMock with default API resources.

<a name="KubernetesApiMock.AddResources"></a>
### func \(\*KubernetesApiMock\) AddResources

```go
func (api *KubernetesApiMock) AddResources(res ...*metav1.APIResourceList) *KubernetesApiMock
```

AddResources adds API resources to the mock discovery client.

<a name="KubernetesApiMock.ClientSet"></a>
### func \(KubernetesApiMock\) ClientSet

```go
func (api KubernetesApiMock) ClientSet() (kubernetes.Interface, error)
```

ClientSet returns a fake Kubernetes clientset populated with the mock client objects.

<a name="KubernetesApiMock.DiscoveryClient"></a>
### func \(KubernetesApiMock\) DiscoveryClient

```go
func (api KubernetesApiMock) DiscoveryClient() (discovery.DiscoveryInterface, error)
```

DiscoveryClient returns a fake discovery client populated with the mock API resources.

<a name="KubernetesApiMock.DynamicClient"></a>
### func \(KubernetesApiMock\) DynamicClient

```go
func (api KubernetesApiMock) DynamicClient() (dynamic.Interface, error)
```

DynamicClient returns a fake dynamic client populated with the mock dynamic objects.

<a name="KubernetesApiMock.WithClientObjects"></a>
### func \(\*KubernetesApiMock\) WithClientObjects

```go
func (api *KubernetesApiMock) WithClientObjects(objects ...runtime.Object) *KubernetesApiMock
```

WithClientObjects adds client objects to the mock clientset.

<a name="KubernetesApiMock.WithDynamicObjects"></a>
### func \(\*KubernetesApiMock\) WithDynamicObjects

```go
func (api *KubernetesApiMock) WithDynamicObjects(objects ...runtime.Object) *KubernetesApiMock
```

WithDynamicObjects adds dynamic objects to the mock dynamic client.

<a name="KubernetesApiMock.WithError"></a>
### func \(\*KubernetesApiMock\) WithError

```go
func (api *KubernetesApiMock) WithError(err error) *KubernetesApiMock
```

WithError sets the error to be returned by the mock API.

<a name="KubernetesAppConnectionInfo"></a>
## type KubernetesAppConnectionInfo

KubernetesAppConnectionInfo contains information about an application's connection in Kubernetes.

```go
type KubernetesAppConnectionInfo struct {
    Name           string
    PublicEndpoint string
    AdminUsername  string
    AdminPassword  string
    Error          error
}
```

<a name="KubernetesClient"></a>
## type KubernetesClient

KubernetesClient is the implementation of the Kubernetes provider client.

```go
type KubernetesClient struct {
    // contains filtered or unexported fields
}
```

<a name="NewKubernetesClient"></a>
### func NewKubernetesClient

```go
func NewKubernetesClient(api KubernetesApi, kubeconfig KubeconfigInfo, cfg quartzSchema.QuartzConfig) (KubernetesClient, error)
```

NewKubernetesClient creates a new KubernetesClient instance.

<a name="KubernetesClient.CheckAccess"></a>
### func \(KubernetesClient\) CheckAccess

```go
func (c KubernetesClient) CheckAccess(ctx context.Context) ProviderCheckResult
```

CheckAccess checks access to the Kubernetes cluster.

<a name="KubernetesClient.EnsureKubeconfig"></a>
### func \(KubernetesClient\) EnsureKubeconfig

```go
func (c KubernetesClient) EnsureKubeconfig(path string) error
```

EnsureKubeconfig ensures that the kubeconfig file exists at the specified path.

<a name="KubernetesClient.Export"></a>
### func \(KubernetesClient\) Export

```go
func (c KubernetesClient) Export(ctx context.Context, cfg quartzSchema.ExportConfig) (map[string][]byte, error)
```

Export exports Kubernetes resources based on the provided configuration.

<a name="KubernetesClient.ForEachDynamicResources"></a>
### func \(KubernetesClient\) ForEachDynamicResources

```go
func (c KubernetesClient) ForEachDynamicResources(ctx context.Context, kind schema.GroupVersionResource, ns string, onEachItem func(unstructured.Unstructured)) error
```

ForEachDynamicResources iterates over all dynamic resources of a specific kind and namespace.

<a name="KubernetesClient.GetAppConnectionInfo"></a>
### func \(KubernetesClient\) GetAppConnectionInfo

```go
func (c KubernetesClient) GetAppConnectionInfo(ctx context.Context, name string, opts quartzSchema.ApplicationLookupConfig) KubernetesAppConnectionInfo
```

GetAppConnectionInfo retrieves connection information for an application.

<a name="KubernetesClient.GetConfigMapValue"></a>
### func \(KubernetesClient\) GetConfigMapValue

```go
func (c KubernetesClient) GetConfigMapValue(ctx context.Context, ns string, name string) (map[string]string, error)
```

GetConfigMapValue retrieves the key\-value pairs from a ConfigMap.

<a name="KubernetesClient.GetDynamicResource"></a>
### func \(KubernetesClient\) GetDynamicResource

```go
func (c KubernetesClient) GetDynamicResource(ctx context.Context, kind schema.GroupVersionResource, ns string, name string) (map[string]interface{}, error)
```

GetDynamicResource retrieves a dynamic resource from the cluster.

<a name="KubernetesClient.GetSecret"></a>
### func \(KubernetesClient\) GetSecret

```go
func (c KubernetesClient) GetSecret(ctx context.Context, ns string, name string) (*corev1.Secret, error)
```

GetSecret retrieves a Secret from the cluster.

<a name="KubernetesClient.GetSecretValue"></a>
### func \(KubernetesClient\) GetSecretValue

```go
func (c KubernetesClient) GetSecretValue(ctx context.Context, ns string, name string) (map[string]string, error)
```

GetSecretValue retrieves the key\-value pairs from a Secret.

<a name="KubernetesClient.LookupKind"></a>
### func \(KubernetesClient\) LookupKind

```go
func (c KubernetesClient) LookupKind(ctx context.Context, kind string) (schema.GroupVersionResource, error)
```

LookupKind looks up the GroupVersionResource for a given kind.

<a name="KubernetesClient.PrintClusterAppInfo"></a>
### func \(KubernetesClient\) PrintClusterAppInfo

```go
func (c KubernetesClient) PrintClusterAppInfo(ctx context.Context, apps map[string]quartzSchema.ApplicationLookupConfig)
```

PrintClusterAppInfo prints detailed information about the specified applications in the cluster.

<a name="KubernetesClient.PrintClusterInfo"></a>
### func \(KubernetesClient\) PrintClusterInfo

```go
func (c KubernetesClient) PrintClusterInfo(ctx context.Context)
```

PrintClusterInfo prints information about the cluster and its applications.

<a name="KubernetesClient.ProviderName"></a>
### func \(KubernetesClient\) ProviderName

```go
func (c KubernetesClient) ProviderName() string
```

ProviderName returns the name of the provider.

<a name="KubernetesClient.RefreshExternalSecrets"></a>
### func \(KubernetesClient\) RefreshExternalSecrets

```go
func (c KubernetesClient) RefreshExternalSecrets(ctx context.Context) ([]KubernetesResource, error)
```

RefreshExternalSecrets triggers a refresh of external secrets in the cluster.

<a name="KubernetesClient.Restart"></a>
### func \(KubernetesClient\) Restart

```go
func (c KubernetesClient) Restart(ctx context.Context, kind schema.GroupVersionResource, ns string, name string) error
```

Restart restarts resources of a specific kind in the cluster.

<a name="KubernetesClient.Update"></a>
### func \(KubernetesClient\) Update

```go
func (c KubernetesClient) Update(ctx context.Context, kind schema.GroupVersionResource, ns string, obj *unstructured.Unstructured) (*unstructured.Unstructured, error)
```

Update updates a dynamic resource in the cluster.

<a name="KubernetesClient.WaitConditionState"></a>
### func \(KubernetesClient\) WaitConditionState

```go
func (c KubernetesClient) WaitConditionState(ctx context.Context, kind schema.GroupVersionResource, ns string, name string, state string, timeoutSeconds int) error
```

WaitConditionState waits for a resource to reach a specific condition state.

<a name="KubernetesClient.WriteKubeconfig"></a>
### func \(KubernetesClient\) WriteKubeconfig

```go
func (c KubernetesClient) WriteKubeconfig(w io.Writer) error
```

WriteKubeconfig writes the kubeconfig to the provided writer.

<a name="KubernetesClient.WriteKubeconfigFile"></a>
### func \(KubernetesClient\) WriteKubeconfigFile

```go
func (c KubernetesClient) WriteKubeconfigFile(path string) error
```

WriteKubeconfigFile writes the kubeconfig to the specified file path.

<a name="KubernetesLookupCache"></a>
## type KubernetesLookupCache

KubernetesLookupCache is a cache for Kubernetes resource kinds.

```go
type KubernetesLookupCache struct {
    // contains filtered or unexported fields
}
```

<a name="KubernetesProviderCheckResult"></a>
## type KubernetesProviderCheckResult



```go
type KubernetesProviderCheckResult struct {
    Status bool
    Error  error
    // contains filtered or unexported fields
}
```

<a name="KubernetesProviderCheckResult.ToTable"></a>
### func \(KubernetesProviderCheckResult\) ToTable

```go
func (r KubernetesProviderCheckResult) ToTable() ([]string, []ProviderCheckResultRow)
```

ToTable converts the KubernetesProviderCheckResult into table headers and rows for display.

<a name="KubernetesProviderClient"></a>
## type KubernetesProviderClient

KubernetesProviderClient defines the interface for Kubernetes provider clients.

```go
type KubernetesProviderClient interface {
    Provider
    LookupKind(ctx context.Context, kind string) (schema.GroupVersionResource, error)
    WaitConditionState(ctx context.Context, kind schema.GroupVersionResource, ns string, name string, state string, timeoutSeconds int) error
    PrintClusterInfo(ctx context.Context)
    WriteKubeconfigFile(path string) error
    RefreshExternalSecrets(ctx context.Context) ([]KubernetesResource, error)
    Export(ctx context.Context, cfg quartzSchema.ExportConfig) (map[string][]byte, error)
    GetConfigMapValue(ctx context.Context, ns string, name string) (map[string]string, error)
    GetSecretValue(ctx context.Context, ns string, name string) (map[string]string, error)
    Restart(ctx context.Context, kind schema.GroupVersionResource, ns string, name string) error
}
```

<a name="KubernetesResource"></a>
## type KubernetesResource

KubernetesResource represents a Kubernetes resource.

```go
type KubernetesResource struct {
    Name      string
    Namespace string
    Kind      schema.GroupVersionResource
    Item      unstructured.Unstructured
}
```

<a name="LazyAwsSdkClient"></a>
## type LazyAwsSdkClient

LazyAwsSdkClient is a lazy\-loading implementation of AWS SDK clients. It initializes clients only when they are accessed.

```go
type LazyAwsSdkClient struct {
    // contains filtered or unexported fields
}
```

<a name="LazyAwsSdkClient.Dynamodb"></a>
### func \(\*LazyAwsSdkClient\) Dynamodb

```go
func (c *LazyAwsSdkClient) Dynamodb() DynamodbClient
```

Dynamodb returns a lazily initialized DynamoDB client.

<a name="LazyAwsSdkClient.Eks"></a>
### func \(\*LazyAwsSdkClient\) Eks

```go
func (c *LazyAwsSdkClient) Eks() EksClient
```

Eks returns a lazily initialized EKS client.

<a name="LazyAwsSdkClient.EksTokenGenerator"></a>
### func \(\*LazyAwsSdkClient\) EksTokenGenerator

```go
func (c *LazyAwsSdkClient) EksTokenGenerator() (token.Generator, error)
```

EksTokenGenerator returns a new EKS token generator.

<a name="LazyAwsSdkClient.Iam"></a>
### func \(\*LazyAwsSdkClient\) Iam

```go
func (c *LazyAwsSdkClient) Iam() IamClient
```

Iam returns a lazily initialized IAM client.

<a name="LazyAwsSdkClient.S3"></a>
### func \(\*LazyAwsSdkClient\) S3

```go
func (c *LazyAwsSdkClient) S3() S3Client
```

S3 returns a lazily initialized S3 client.

<a name="LazyAwsSdkClient.S3Region"></a>
### func \(\*LazyAwsSdkClient\) S3Region

```go
func (c *LazyAwsSdkClient) S3Region(region string) S3Client
```

S3Region returns an S3 client configured for the specified region.

<a name="LazyAwsSdkClient.Sts"></a>
### func \(\*LazyAwsSdkClient\) Sts

```go
func (c *LazyAwsSdkClient) Sts() StsClient
```

Sts returns a lazily initialized STS client.

<a name="LocalClient"></a>
## type LocalClient

LocalClient represents a local provider client.

```go
type LocalClient struct {
    Name string // The name of the local cluster.
}
```

<a name="LocalClient.CheckAccess"></a>
### func \(LocalClient\) CheckAccess

```go
func (c LocalClient) CheckAccess(ctx context.Context) ProviderCheckResult
```

CheckAccess performs an access check for the local provider. Always returns an EmptyProviderCheckResult as no access check is required.

<a name="LocalClient.CheckConfig"></a>
### func \(LocalClient\) CheckConfig

```go
func (c LocalClient) CheckConfig() error
```

CheckConfig validates the configuration for the local provider. Always returns nil as no validation is required for the local provider.

<a name="LocalClient.CreateStateBackend"></a>
### func \(LocalClient\) CreateStateBackend

```go
func (c LocalClient) CreateStateBackend(_ context.Context) error
```

CreateStateBackend skips the creation of a state backend for the local provider. Logs a message indicating that the operation is skipped.

<a name="LocalClient.CurrentIdentity"></a>
### func \(LocalClient\) CurrentIdentity

```go
func (c LocalClient) CurrentIdentity(ctx context.Context) (CloudProviderIdentity, error)
```

CurrentIdentity returns the identity of the local provider. Always returns a static identity for the local provider.

<a name="LocalClient.DestroyStateBackend"></a>
### func \(LocalClient\) DestroyStateBackend

```go
func (c LocalClient) DestroyStateBackend(_ context.Context) error
```

DestroyStateBackend skips the destruction of a state backend for the local provider. Logs a message indicating that the operation is skipped.

<a name="LocalClient.KubeconfigInfo"></a>
### func \(LocalClient\) KubeconfigInfo

```go
func (c LocalClient) KubeconfigInfo(ctx context.Context) (KubeconfigInfo, error)
```

KubeconfigInfo returns an error as kubeconfig information is not supported for the local provider.

<a name="LocalClient.PrepareAccount"></a>
### func \(LocalClient\) PrepareAccount

```go
func (c LocalClient) PrepareAccount(ctx context.Context) error
```

PrepareAccount performs no operation for the local provider. Always returns nil as no account preparation is required.

<a name="LocalClient.PrintClusterInfo"></a>
### func \(LocalClient\) PrintClusterInfo

```go
func (c LocalClient) PrintClusterInfo(ctx context.Context) error
```

PrintClusterInfo performs no operation for the local provider. Always returns nil as no cluster information is available.

<a name="LocalClient.PrintConfig"></a>
### func \(LocalClient\) PrintConfig

```go
func (c LocalClient) PrintConfig()
```

PrintConfig prints the configuration of the local provider. Displays the name of the local cluster in a table format.

<a name="LocalClient.ProviderName"></a>
### func \(LocalClient\) ProviderName

```go
func (c LocalClient) ProviderName() string
```

ProviderName returns the name of the provider.

<a name="LocalClient.StateBackendInfo"></a>
### func \(LocalClient\) StateBackendInfo

```go
func (c LocalClient) StateBackendInfo(_ string) CloudProviderStateBackend
```

StateBackendInfo returns the state backend information for the local provider. Always returns a static state backend configuration.

<a name="Provider"></a>
## type Provider

Provider defines the interface for all providers.

```go
type Provider interface {
    // ProviderName returns the name of the provider.
    ProviderName() string
    // CheckAccess performs an access check for the provider.
    CheckAccess(context.Context) ProviderCheckResult
}
```

<a name="NewImageRegistryProviderClient"></a>
### func NewImageRegistryProviderClient

```go
func NewImageRegistryProviderClient(ctx context.Context, cfg schema.QuartzConfig, secrets schema.QuartzSecrets) (Provider, error)
```

NewImageRegistryProviderClient creates a new image registry provider client based on the configuration and secrets. If image repository mirroring is disabled, it initializes an Ironbank client. Otherwise, it initializes a GitHub client.

<a name="NewSourceControlProviderClient"></a>
### func NewSourceControlProviderClient

```go
func NewSourceControlProviderClient(ctx context.Context, cfg schema.QuartzConfig, secrets schema.QuartzSecrets) (Provider, error)
```

NewSourceControlProviderClient creates a new source control provider client.

<a name="ProviderCheckOpts"></a>
## type ProviderCheckOpts

ProviderCheckOpts contains options for performing provider checks.

```go
type ProviderCheckOpts struct {
    // contains filtered or unexported fields
}
```

<a name="NewProviderCheckOpts"></a>
### func NewProviderCheckOpts

```go
func NewProviderCheckOpts(ctx context.Context, f ProviderFactory) ProviderCheckOpts
```

NewProviderCheckOpts creates a new ProviderCheckOpts instance. It initializes the list of providers to check by iterating over the provided factory.

<a name="ProviderCheckResult"></a>
## type ProviderCheckResult

IProviderCheckResult defines the interface for provider check results.

```go
type ProviderCheckResult interface {
    // ToTable converts the check result into table headers and rows.
    ToTable() ([]string, []ProviderCheckResultRow)
}
```

<a name="ProviderCheckResultRow"></a>
## type ProviderCheckResultRow

ProviderCheckResultRow represents a single row in the provider check result table.

```go
type ProviderCheckResultRow struct {
    Status bool     // Status indicates whether the check was successful.
    Data   []string // Data contains the row's data fields.
    Error  error    // Error contains any error associated with the row.
}
```

<a name="ProviderFactory"></a>
## type ProviderFactory

ProviderFactory is responsible for creating and managing provider clients.

```go
type ProviderFactory struct {
    // contains filtered or unexported fields
}
```

<a name="NewProviderFactory"></a>
### func NewProviderFactory

```go
func NewProviderFactory(cfg schema.QuartzConfig, secrets schema.QuartzSecrets, opts ...ProviderFactoryOption) *ProviderFactory
```

NewProviderFactory creates a new ProviderFactory with the given configuration and secrets.

<a name="ProviderFactory.Cloud"></a>
### func \(\*ProviderFactory\) Cloud

```go
func (f *ProviderFactory) Cloud(ctx context.Context) (CloudProviderClient, error)
```

Cloud returns the cloud provider client, initializing it if necessary.

<a name="ProviderFactory.Dns"></a>
### func \(\*ProviderFactory\) Dns

```go
func (f *ProviderFactory) Dns(ctx context.Context) (DnsProviderClient, error)
```

Dns returns the DNS provider client, initializing it if necessary.

<a name="ProviderFactory.ImageRegistry"></a>
### func \(\*ProviderFactory\) ImageRegistry

```go
func (f *ProviderFactory) ImageRegistry(ctx context.Context) (Provider, error)
```

ImageRegistry returns the image registry provider client, initializing it if necessary.

<a name="ProviderFactory.Kubernetes"></a>
### func \(\*ProviderFactory\) Kubernetes

```go
func (f *ProviderFactory) Kubernetes(ctx context.Context) (KubernetesProviderClient, error)
```

Kubernetes returns the Kubernetes provider client, initializing it if necessary.

<a name="ProviderFactory.SourceControl"></a>
### func \(\*ProviderFactory\) SourceControl

```go
func (f *ProviderFactory) SourceControl(ctx context.Context) (Provider, error)
```

SourceControl returns the source control provider client, initializing it if necessary.

<a name="ProviderFactoryOption"></a>
## type ProviderFactoryOption



```go
type ProviderFactoryOption func(*ProviderFactory)
```

<a name="WithCloudProvider"></a>
### func WithCloudProvider

```go
func WithCloudProvider(p CloudProviderClient) ProviderFactoryOption
```

WithCloudProvider sets the cloud provider client and returns the updated factory.

<a name="WithConfig"></a>
### func WithConfig

```go
func WithConfig(c schema.QuartzConfig) ProviderFactoryOption
```

WithConfig sets the Quartz configuration and returns the updated factory.

<a name="WithDnsProvider"></a>
### func WithDnsProvider

```go
func WithDnsProvider(p DnsProviderClient) ProviderFactoryOption
```

WithDnsProvider sets the DNS provider client and returns the updated factory.

<a name="WithImageRegistryProvider"></a>
### func WithImageRegistryProvider

```go
func WithImageRegistryProvider(p Provider) ProviderFactoryOption
```

WithImageRegistryProvider sets the image registry provider client and returns the updated factory.

<a name="WithKubernetesProvider"></a>
### func WithKubernetesProvider

```go
func WithKubernetesProvider(p KubernetesProviderClient) ProviderFactoryOption
```

WithKubernetesProvider sets the Kubernetes provider client and returns the updated factory.

<a name="WithSecrets"></a>
### func WithSecrets

```go
func WithSecrets(s schema.QuartzSecrets) ProviderFactoryOption
```

WithSecrets sets the Quartz secrets and returns the updated factory.

<a name="WithSourceControlProvider"></a>
### func WithSourceControlProvider

```go
func WithSourceControlProvider(p Provider) ProviderFactoryOption
```

WithSourceControlProvider sets the source control provider client and returns the updated factory.

<a name="S3Client"></a>
## type S3Client

S3Client defines the interface for interacting with AWS S3.

```go
type S3Client interface {
    HeadBucket(ctx context.Context, params *s3.HeadBucketInput, optFns ...func(*s3.Options)) (*s3.HeadBucketOutput, error)
    CreateBucket(ctx context.Context, params *s3.CreateBucketInput, optFns ...func(*s3.Options)) (*s3.CreateBucketOutput, error)
    DeleteBucket(ctx context.Context, params *s3.DeleteBucketInput, optFns ...func(*s3.Options)) (*s3.DeleteBucketOutput, error)
    ListObjectVersions(ctx context.Context, params *s3.ListObjectVersionsInput, optFns ...func(*s3.Options)) (*s3.ListObjectVersionsOutput, error)
    DeleteObjects(ctx context.Context, params *s3.DeleteObjectsInput, optFns ...func(*s3.Options)) (*s3.DeleteObjectsOutput, error)
}
```

<a name="StsClient"></a>
## type StsClient

StsClient defines the interface for interacting with AWS STS.

```go
type StsClient interface {
    GetCallerIdentity(ctx context.Context, params *sts.GetCallerIdentityInput, optFns ...func(*sts.Options)) (*sts.GetCallerIdentityOutput, error)
}
```

# stages

```go
import "github.com/MetroStar/quartzctl/internal/stages"
```

## Index

- [func LoadStages\(base map\[string\]schema.StageConfig, paths ...string\) map\[string\]schema.StageConfig](<#LoadStages>)
- [func NewStageConfig\(id string\) schema.StageConfig](<#NewStageConfig>)
- [func NewStageConfigPath\(path string, dir fs.DirEntry\) schema.StageConfig](<#NewStageConfigPath>)
- [type CheckOpts](<#CheckOpts>)
- [type CheckResult](<#CheckResult>)
  - [func RunChecks\(ctx context.Context, cfg schema.QuartzConfig, stage string, event string, checks \[\]StageCheck, opts \*CheckOpts\) \(\[\]CheckResult, error\)](<#RunChecks>)
  - [func RunPostChecks\(ctx context.Context, cfg schema.QuartzConfig, providerFactory provider.ProviderFactory, stage string, event string, opts \*CheckOpts\) \(\[\]CheckResult, error\)](<#RunPostChecks>)
  - [func RunPreChecks\(ctx context.Context, cfg schema.QuartzConfig, providerFactory provider.ProviderFactory, stage string, event string, opts \*CheckOpts\) \(\[\]CheckResult, error\)](<#RunPreChecks>)
- [type HttpStageCheck](<#HttpStageCheck>)
  - [func \(c HttpStageCheck\) Id\(\) string](<#HttpStageCheck.Id>)
  - [func \(c HttpStageCheck\) RetryOpts\(\) schema.StageChecksRetryConfig](<#HttpStageCheck.RetryOpts>)
  - [func \(c HttpStageCheck\) Run\(ctx context.Context, cfg schema.QuartzConfig\) error](<#HttpStageCheck.Run>)
  - [func \(c HttpStageCheck\) Type\(\) string](<#HttpStageCheck.Type>)
- [type KubernetesStageCheck](<#KubernetesStageCheck>)
  - [func NewKubernetesStageCheck\(src schema.StageChecksKubernetesConfig, providerFactory provider.ProviderFactory\) KubernetesStageCheck](<#NewKubernetesStageCheck>)
  - [func \(c KubernetesStageCheck\) Id\(\) string](<#KubernetesStageCheck.Id>)
  - [func \(c KubernetesStageCheck\) RetryOpts\(\) schema.StageChecksRetryConfig](<#KubernetesStageCheck.RetryOpts>)
  - [func \(c KubernetesStageCheck\) Run\(ctx context.Context, \_ schema.QuartzConfig\) error](<#KubernetesStageCheck.Run>)
  - [func \(c KubernetesStageCheck\) Type\(\) string](<#KubernetesStageCheck.Type>)
- [type StageCheck](<#StageCheck>)
- [type StageCheckRetryOpts](<#StageCheckRetryOpts>)
- [type StateStageCheck](<#StateStageCheck>)
  - [func NewStateStageCheck\(src schema.StageChecksStateConfig, providerFactory provider.ProviderFactory\) StateStageCheck](<#NewStateStageCheck>)
  - [func \(c StateStageCheck\) Id\(\) string](<#StateStageCheck.Id>)
  - [func \(c StateStageCheck\) RetryOpts\(\) schema.StageChecksRetryConfig](<#StateStageCheck.RetryOpts>)
  - [func \(c StateStageCheck\) Run\(ctx context.Context, cfg schema.QuartzConfig\) error](<#StateStageCheck.Run>)
  - [func \(c StateStageCheck\) Type\(\) string](<#StateStageCheck.Type>)


<a name="LoadStages"></a>
## func LoadStages

```go
func LoadStages(base map[string]schema.StageConfig, paths ...string) map[string]schema.StageConfig
```

LoadStages loads stage configurations from the specified paths and merges them with the base configuration. It processes dependencies and ensures the correct order of stages.

<a name="NewStageConfig"></a>
## func NewStageConfig

```go
func NewStageConfig(id string) schema.StageConfig
```

NewStageConfig creates a new StageConfig with default values for the specified stage ID.

<a name="NewStageConfigPath"></a>
## func NewStageConfigPath

```go
func NewStageConfigPath(path string, dir fs.DirEntry) schema.StageConfig
```

NewStageConfigPath creates a StageConfig by extracting information from the directory name and optionally loading additional configuration from a \`stage.yaml\` file.

<a name="CheckOpts"></a>
## type CheckOpts

CheckOpts contains options for running stage checks.

```go
type CheckOpts struct {
    OnStart    func(cr CheckResult)        // Callback invoked when a check starts.
    OnComplete func(cr CheckResult)        // Callback invoked when a check completes.
    OnRetry    func(cr CheckResult, n int) // Callback invoked when a check is retried.
}
```

<a name="CheckResult"></a>
## type CheckResult

CheckResult represents the result of a stage check.

```go
type CheckResult struct {
    Id    string // The unique identifier of the check.
    Type  string // The type of the check.
    Stage string // The stage associated with the check.
    Event string // The event associated with the check.
    Error error  // Any error encountered during the check.
}
```

<a name="RunChecks"></a>
### func RunChecks

```go
func RunChecks(ctx context.Context, cfg schema.QuartzConfig, stage string, event string, checks []StageCheck, opts *CheckOpts) ([]CheckResult, error)
```

RunChecks executes the specified stage checks and handles retries based on the retry configuration. Returns the results of the checks and any errors encountered.

<a name="RunPostChecks"></a>
### func RunPostChecks

```go
func RunPostChecks(ctx context.Context, cfg schema.QuartzConfig, providerFactory provider.ProviderFactory, stage string, event string, opts *CheckOpts) ([]CheckResult, error)
```

RunPostChecks executes post\-event checks for the specified stage and event. Returns the results of the checks and any errors encountered.

<a name="RunPreChecks"></a>
### func RunPreChecks

```go
func RunPreChecks(ctx context.Context, cfg schema.QuartzConfig, providerFactory provider.ProviderFactory, stage string, event string, opts *CheckOpts) ([]CheckResult, error)
```

RunPreChecks executes pre\-event checks for the specified stage and event. Returns the results of the checks and any errors encountered.

<a name="HttpStageCheck"></a>
## type HttpStageCheck

HttpStageCheck represents an HTTP\-based stage check.

```go
type HttpStageCheck schema.StageChecksHttpConfig
```

<a name="HttpStageCheck.Id"></a>
### func \(HttpStageCheck\) Id

```go
func (c HttpStageCheck) Id() string
```

Id returns the unique identifier of the HTTP stage check. If a URL is provided, it is used as the identifier; otherwise, the path is used.

<a name="HttpStageCheck.RetryOpts"></a>
### func \(HttpStageCheck\) RetryOpts

```go
func (c HttpStageCheck) RetryOpts() schema.StageChecksRetryConfig
```

RetryOpts returns the retry configuration for the HTTP stage check. It includes the retry limit and wait time between retries.

<a name="HttpStageCheck.Run"></a>
### func \(HttpStageCheck\) Run

```go
func (c HttpStageCheck) Run(ctx context.Context, cfg schema.QuartzConfig) error
```

Run executes the HTTP stage check by sending a GET request to the specified URL. It validates the response status code and content based on the check configuration.

<a name="HttpStageCheck.Type"></a>
### func \(HttpStageCheck\) Type

```go
func (c HttpStageCheck) Type() string
```

Type returns the type of the stage check, which is "http".

<a name="KubernetesStageCheck"></a>
## type KubernetesStageCheck

KubernetesStageCheck represents a Kubernetes\-based stage check.

```go
type KubernetesStageCheck struct {
    // contains filtered or unexported fields
}
```

<a name="NewKubernetesStageCheck"></a>
### func NewKubernetesStageCheck

```go
func NewKubernetesStageCheck(src schema.StageChecksKubernetesConfig, providerFactory provider.ProviderFactory) KubernetesStageCheck
```

NewKubernetesStageCheck creates a new KubernetesStageCheck instance with the specified configuration and provider factory.

<a name="KubernetesStageCheck.Id"></a>
### func \(KubernetesStageCheck\) Id

```go
func (c KubernetesStageCheck) Id() string
```

Id returns the unique identifier of the Kubernetes stage check. The identifier includes the kind, name, and namespace of the resource being checked.

<a name="KubernetesStageCheck.RetryOpts"></a>
### func \(KubernetesStageCheck\) RetryOpts

```go
func (c KubernetesStageCheck) RetryOpts() schema.StageChecksRetryConfig
```

RetryOpts returns the retry configuration for the Kubernetes stage check. By default, it allows only one attempt with no wait time between retries.

<a name="KubernetesStageCheck.Run"></a>
### func \(KubernetesStageCheck\) Run

```go
func (c KubernetesStageCheck) Run(ctx context.Context, _ schema.QuartzConfig) error
```

Run executes the Kubernetes stage check. It performs operations such as restarting resources, waiting for conditions, and validating resource states.

<a name="KubernetesStageCheck.Type"></a>
### func \(KubernetesStageCheck\) Type

```go
func (c KubernetesStageCheck) Type() string
```

Type returns the type of the stage check, which is "kubernetes".

<a name="StageCheck"></a>
## type StageCheck

StageCheck defines the interface for stage checks.

```go
type StageCheck interface {
    // Run executes the stage check and returns an error if the check fails.
    Run(ctx context.Context, cfg schema.QuartzConfig) error
    // Id returns the unique identifier of the stage check.
    Id() string
    // Type returns the type of the stage check.
    Type() string
    // RetryOpts returns the retry configuration for the stage check.
    RetryOpts() schema.StageChecksRetryConfig
}
```

<a name="StageCheckRetryOpts"></a>
## type StageCheckRetryOpts

StageCheckRetryOpts defines retry options for stage checks.

```go
type StageCheckRetryOpts struct {
    Max            int // The maximum number of retries.
    BackoffSeconds int // The backoff time in seconds between retries.
}
```

<a name="StateStageCheck"></a>
## type StateStageCheck

StateStageCheck represents a state\-based stage check.

```go
type StateStageCheck struct {
    // contains filtered or unexported fields
}
```

<a name="NewStateStageCheck"></a>
### func NewStateStageCheck

```go
func NewStateStageCheck(src schema.StageChecksStateConfig, providerFactory provider.ProviderFactory) StateStageCheck
```

NewStateStageCheck creates a new StateStageCheck instance with the specified configuration and provider factory.

<a name="StateStageCheck.Id"></a>
### func \(StateStageCheck\) Id

```go
func (c StateStageCheck) Id() string
```

Id returns the unique identifier of the state stage check. The identifier includes the key and expected value being checked.

<a name="StateStageCheck.RetryOpts"></a>
### func \(StateStageCheck\) RetryOpts

```go
func (c StateStageCheck) RetryOpts() schema.StageChecksRetryConfig
```

RetryOpts returns the retry configuration for the state stage check. It includes the retry limit and wait time between retries.

<a name="StateStageCheck.Run"></a>
### func \(StateStageCheck\) Run

```go
func (c StateStageCheck) Run(ctx context.Context, cfg schema.QuartzConfig) error
```

Run executes the state stage check by validating the state stored in a Kubernetes ConfigMap. It ensures the specified key exists and matches the expected value.

<a name="StateStageCheck.Type"></a>
### func \(StateStageCheck\) Type

```go
func (c StateStageCheck) Type() string
```

Type returns the type of the stage check, which is "state".

# terraform

```go
import "github.com/MetroStar/quartzctl/internal/terraform"
```

## Index

- [func ResetInstance\(\)](<#ResetInstance>)
- [type TerraformClient](<#TerraformClient>)
  - [func Instance\(ctx context.Context, cfg config.Settings\) \*TerraformClient](<#Instance>)
  - [func NewTerraformClient\(ctx context.Context, cfg config.Settings\) \(TerraformClient, error\)](<#NewTerraformClient>)
  - [func \(c \*TerraformClient\) Apply\(ctx context.Context, stage schema.StageConfig\) error](<#TerraformClient.Apply>)
  - [func \(c \*TerraformClient\) Cleanup\(ctx context.Context\) error](<#TerraformClient.Cleanup>)
  - [func \(c \*TerraformClient\) Destroy\(ctx context.Context, stage schema.StageConfig\) error](<#TerraformClient.Destroy>)
  - [func \(c \*TerraformClient\) Format\(ctx context.Context, stage schema.StageConfig\) error](<#TerraformClient.Format>)
  - [func \(c \*TerraformClient\) Init\(ctx context.Context, stage schema.StageConfig, opts TerraformInitOpts\) error](<#TerraformClient.Init>)
  - [func \(c \*TerraformClient\) Output\(ctx context.Context, stage schema.StageConfig\) \(map\[string\]\[\]byte, error\)](<#TerraformClient.Output>)
  - [func \(c \*TerraformClient\) Plan\(ctx context.Context, stage schema.StageConfig\) \(bool, error\)](<#TerraformClient.Plan>)
  - [func \(c \*TerraformClient\) Refresh\(ctx context.Context, stage schema.StageConfig\) error](<#TerraformClient.Refresh>)
  - [func \(c \*TerraformClient\) Validate\(ctx context.Context, stage schema.StageConfig\) \(\*tfjson.ValidateOutput, error\)](<#TerraformClient.Validate>)
  - [func \(c \*TerraformClient\) Version\(ctx context.Context\) \(string, error\)](<#TerraformClient.Version>)
- [type TerraformInitOpts](<#TerraformInitOpts>)
- [type TfExecTerraformLogger](<#TfExecTerraformLogger>)
- [type TfOpts](<#TfOpts>)


<a name="ResetInstance"></a>
## func ResetInstance

```go
func ResetInstance()
```

ResetInstance resets the singleton instance of the TerraformClient. This is useful for testing to ensure a fresh client is created.

<a name="TerraformClient"></a>
## type TerraformClient

TerraformClient is a wrapper for the Terraform CLI, providing functionality for managing Terraform operations.

```go
type TerraformClient struct {
    // contains filtered or unexported fields
}
```

<a name="Instance"></a>
### func Instance

```go
func Instance(ctx context.Context, cfg config.Settings) *TerraformClient
```

Instance returns a singleton instance of the TerraformClient. It initializes the client if it has not been created already.

<a name="NewTerraformClient"></a>
### func NewTerraformClient

```go
func NewTerraformClient(ctx context.Context, cfg config.Settings) (TerraformClient, error)
```

NewTerraformClient creates a new TerraformClient instance and ensures the Terraform CLI is available.

<a name="TerraformClient.Apply"></a>
### func \(\*TerraformClient\) Apply

```go
func (c *TerraformClient) Apply(ctx context.Context, stage schema.StageConfig) error
```

Apply applies the Terraform configuration for the specified stage. It runs \`terraform apply\` with the configured input variables.

<a name="TerraformClient.Cleanup"></a>
### func \(\*TerraformClient\) Cleanup

```go
func (c *TerraformClient) Cleanup(ctx context.Context) error
```

Cleanup removes the downloaded Terraform CLI from the file system.

<a name="TerraformClient.Destroy"></a>
### func \(\*TerraformClient\) Destroy

```go
func (c *TerraformClient) Destroy(ctx context.Context, stage schema.StageConfig) error
```

Destroy destroys the Terraform\-managed infrastructure for the specified stage. It runs \`terraform destroy\` with the configured input variables and targets.

<a name="TerraformClient.Format"></a>
### func \(\*TerraformClient\) Format

```go
func (c *TerraformClient) Format(ctx context.Context, stage schema.StageConfig) error
```

Format formats the Terraform configuration files in the specified stage directory. It runs \`terraform fmt \-recursive\`.

<a name="TerraformClient.Init"></a>
### func \(\*TerraformClient\) Init

```go
func (c *TerraformClient) Init(ctx context.Context, stage schema.StageConfig, opts TerraformInitOpts) error
```

Init initializes the Terraform working directory for the specified stage. It runs \`terraform init \-upgrade \-reconfigure\` with the provided backend configuration options.

<a name="TerraformClient.Output"></a>
### func \(\*TerraformClient\) Output

```go
func (c *TerraformClient) Output(ctx context.Context, stage schema.StageConfig) (map[string][]byte, error)
```

Output retrieves the Terraform output for the specified stage directory. It returns a map of output variable names to their values in JSON format.

<a name="TerraformClient.Plan"></a>
### func \(\*TerraformClient\) Plan

```go
func (c *TerraformClient) Plan(ctx context.Context, stage schema.StageConfig) (bool, error)
```

Plan creates an execution plan for the specified stage. It runs \`terraform plan\` with the configured input variables and returns whether changes are required.

<a name="TerraformClient.Refresh"></a>
### func \(\*TerraformClient\) Refresh

```go
func (c *TerraformClient) Refresh(ctx context.Context, stage schema.StageConfig) error
```

Refresh updates the Terraform state for the specified stage. It runs \`terraform refresh\` with the configured input variables.

<a name="TerraformClient.Validate"></a>
### func \(\*TerraformClient\) Validate

```go
func (c *TerraformClient) Validate(ctx context.Context, stage schema.StageConfig) (*tfjson.ValidateOutput, error)
```

Validate validates the Terraform configuration for the specified stage. It runs \`terraform validate\` and returns the validation output.

<a name="TerraformClient.Version"></a>
### func \(\*TerraformClient\) Version

```go
func (c *TerraformClient) Version(ctx context.Context) (string, error)
```

Version retrieves the version of the Terraform CLI. It runs the \`terraform version\` command and returns the version string.

<a name="TerraformInitOpts"></a>
## type TerraformInitOpts

TerraformInitOpts represents options for initializing Terraform with backend configuration.

```go
type TerraformInitOpts struct {
    BackendConfig []string // The backend configuration options.
}
```

<a name="TfExecTerraformLogger"></a>
## type TfExecTerraformLogger

TfExecTerraformLogger defines the interface for configuring Terraform logging.

```go
type TfExecTerraformLogger interface {
    SetLogPath(string) error // Sets the log file path.
    SetLog(string) error     // Sets the log level.
}
```

<a name="TfOpts"></a>
## type TfOpts

TfOpts represents options for configuring a Terraform instance.

```go
type TfOpts struct {
    // contains filtered or unexported fields
}
```

# util

```go
import "github.com/MetroStar/quartzctl/internal/util"
```

## Index

- [Constants](<#constants>)
- [func DistinctSlice\[T comparable\]\(s \[\]T\) \[\]T](<#DistinctSlice>)
- [func EnvMap\(environ \[\]string\) map\[string\]string](<#EnvMap>)
- [func EqualsOrRegexMatchString\(pattern string, s string, insensitive bool\) bool](<#EqualsOrRegexMatchString>)
- [func Error\(a ...any\)](<#Error>)
- [func Errorf\(format string, a ...any\)](<#Errorf>)
- [func GetenvOrDefault\(key string, defaultValue string\) string](<#GetenvOrDefault>)
- [func Hdr\(a ...any\)](<#Hdr>)
- [func Hdrf\(format string, a ...any\)](<#Hdrf>)
- [func MapContainsKey\[K comparable, V interface\{\}\]\(m map\[K\]V, key K\) bool](<#MapContainsKey>)
- [func MapIntKeysToSortedSlice\[V interface\{\}\]\(m map\[int\]V\) \[\]V](<#MapIntKeysToSortedSlice>)
- [func MarshalKoanfStructToBytes\[T any\]\(o T, p koanf.Parser\) \[\]byte](<#MarshalKoanfStructToBytes>)
- [func MarshalToJsonBytes\[T any\]\(o T\) \[\]byte](<#MarshalToJsonBytes>)
- [func MarshalToYamlBytes\[T any\]\(o T\) \[\]byte](<#MarshalToYamlBytes>)
- [func MergeMaps\[K comparable, V interface\{\}\]\(maps ...map\[K\]V\) map\[K\]V](<#MergeMaps>)
- [func Msg\(a ...any\)](<#Msg>)
- [func Msgf\(format string, a ...any\)](<#Msgf>)
- [func OsEnvMap\(\) map\[string\]string](<#OsEnvMap>)
- [func Print\(a ...any\)](<#Print>)
- [func PrintBanner\(\)](<#PrintBanner>)
- [func PrintRowStatusTable\(headers \[\]string, rows \[\]\[\]string, statusFunc func\(i int, row \[\]string\) RowStatus\)](<#PrintRowStatusTable>)
- [func PrintTable\(headers \[\]string, rows \[\]\[\]string\)](<#PrintTable>)
- [func Printf\(format string, a ...any\)](<#Printf>)
- [func PromptYesNo\(msg string\) bool](<#PromptYesNo>)
- [func RunOnce\(key string, f func\(\) error\) error](<#RunOnce>)
- [func SetWriter\(w io.Writer\)](<#SetWriter>)
- [func ToInterfaceSlice\[T any\]\(s \[\]T\) \[\]interface\{\}](<#ToInterfaceSlice>)
- [func ToTypedSlice\[T any\]\(s \[\]interface\{\}\) \[\]T](<#ToTypedSlice>)
- [func TruncateString\(s string, n int\) string](<#TruncateString>)
- [func TruncateStringE\(s string, n int\) string](<#TruncateStringE>)
- [func ValueOrDefault\[T comparable\]\(val T, def T\) T](<#ValueOrDefault>)
- [func WriteBytesToFile\(b \[\]byte, path string\) error](<#WriteBytesToFile>)
- [func WriteStringToFile\(s string, path string\) error](<#WriteStringToFile>)
- [func Zero\[T any\]\(\) T](<#Zero>)
- [type HttpClientFactory](<#HttpClientFactory>)
  - [func NewHttpClientFactory\(\) HttpClientFactory](<#NewHttpClientFactory>)
- [type HttpClientFactoryImpl](<#HttpClientFactoryImpl>)
  - [func \(f HttpClientFactoryImpl\) NewClient\(\) \*http.Client](<#HttpClientFactoryImpl.NewClient>)
- [type HttpClientFactoryMock](<#HttpClientFactoryMock>)
  - [func \(f HttpClientFactoryMock\) NewClient\(\) \*http.Client](<#HttpClientFactoryMock.NewClient>)
- [type RoundTripFunc](<#RoundTripFunc>)
  - [func \(f RoundTripFunc\) RoundTrip\(req \*http.Request\) \(\*http.Response, error\)](<#RoundTripFunc.RoundTrip>)
- [type RowStatus](<#RowStatus>)


## Constants

<a name="StatusOk"></a>Constants for row statuses and their associated colors.

```go
const (
    StatusOk      RowStatus = "[✔]"
    StatusWarning RowStatus = "[i]"
    StatusError   RowStatus = "[✘]"
    StatusUnknown RowStatus = ""

    ColorOk      = "#00AA00"
    ColorWarning = "#AAAA00"
    ColorError   = "#AA0000"
)
```

<a name="DistinctSlice"></a>
## func DistinctSlice

```go
func DistinctSlice[T comparable](s []T) []T
```

DistinctSlice returns a new slice with duplicate entries removed. The input slice must contain elements of a comparable type.

<a name="EnvMap"></a>
## func EnvMap

```go
func EnvMap(environ []string) map[string]string
```

EnvMap converts a slice of "key=value" strings into a map.

<a name="EqualsOrRegexMatchString"></a>
## func EqualsOrRegexMatchString

```go
func EqualsOrRegexMatchString(pattern string, s string, insensitive bool) bool
```

EqualsOrRegexMatchString checks if a string \`s\` matches a pattern strictly or via a regex. If \`insensitive\` is true, the match is case\-insensitive.

<a name="Error"></a>
## func Error

```go
func Error(a ...any)
```

Error prints an error\-formatted string to the console.

<a name="Errorf"></a>
## func Errorf

```go
func Errorf(format string, a ...any)
```

Errorf prints a formatted error string to the console.

<a name="GetenvOrDefault"></a>
## func GetenvOrDefault

```go
func GetenvOrDefault(key string, defaultValue string) string
```

GetenvOrDefault retrieves the value of the environment variable specified by \`key\`. If the variable is not set, it returns the provided \`defaultValue\`.

<a name="Hdr"></a>
## func Hdr

```go
func Hdr(a ...any)
```

Hdr prints a header\-formatted string to the console.

<a name="Hdrf"></a>
## func Hdrf

```go
func Hdrf(format string, a ...any)
```

Hdrf prints a formatted header string to the console.

<a name="MapContainsKey"></a>
## func MapContainsKey

```go
func MapContainsKey[K comparable, V interface{}](m map[K]V, key K) bool
```

MapContainsKey checks if a map contains a specific key.

<a name="MapIntKeysToSortedSlice"></a>
## func MapIntKeysToSortedSlice

```go
func MapIntKeysToSortedSlice[V interface{}](m map[int]V) []V
```

MapIntKeysToSortedSlice converts a map with integer keys into a slice of values, sorted by the integer keys in ascending order.

<a name="MarshalKoanfStructToBytes"></a>
## func MarshalKoanfStructToBytes

```go
func MarshalKoanfStructToBytes[T any](o T, p koanf.Parser) []byte
```

MarshalKoanfStructToBytes marshals a struct of type \`T\` into bytes using the specified \`koanf.Parser\`. This function uses the Koanf library to handle the marshaling process.

<a name="MarshalToJsonBytes"></a>
## func MarshalToJsonBytes

```go
func MarshalToJsonBytes[T any](o T) []byte
```

MarshalToJsonBytes marshals a struct of type \`T\` into JSON\-encoded bytes.

<a name="MarshalToYamlBytes"></a>
## func MarshalToYamlBytes

```go
func MarshalToYamlBytes[T any](o T) []byte
```

MarshalToYamlBytes marshals a struct of type \`T\` into YAML\-encoded bytes.

<a name="MergeMaps"></a>
## func MergeMaps

```go
func MergeMaps[K comparable, V interface{}](maps ...map[K]V) map[K]V
```

MergeMaps performs a shallow merge of two or more maps into a single map. Duplicate keys in subsequent maps will take precedence and overwrite earlier values.

<a name="Msg"></a>
## func Msg

```go
func Msg(a ...any)
```

Msg prints a message\-formatted string to the console.

<a name="Msgf"></a>
## func Msgf

```go
func Msgf(format string, a ...any)
```

Msgf prints a formatted message string to the console.

<a name="OsEnvMap"></a>
## func OsEnvMap

```go
func OsEnvMap() map[string]string
```

OsEnvMap converts the current environment variables into a map.

<a name="Print"></a>
## func Print

```go
func Print(a ...any)
```

Print prints a formatted string to the console.

<a name="PrintBanner"></a>
## func PrintBanner

```go
func PrintBanner()
```

PrintBanner prints the Quartz ASCII art banner to the console.

<a name="PrintRowStatusTable"></a>
## func PrintRowStatusTable

```go
func PrintRowStatusTable(headers []string, rows [][]string, statusFunc func(i int, row []string) RowStatus)
```

PrintRowStatusTable prints a formatted table with a status indicator column to the console.

<a name="PrintTable"></a>
## func PrintTable

```go
func PrintTable(headers []string, rows [][]string)
```

PrintTable prints a formatted table to the console.

<a name="Printf"></a>
## func Printf

```go
func Printf(format string, a ...any)
```

Printf prints a formatted string to the console.

<a name="PromptYesNo"></a>
## func PromptYesNo

```go
func PromptYesNo(msg string) bool
```

PromptYesNo displays a yes/no prompt to the console and returns true if "yes" was selected.

<a name="RunOnce"></a>
## func RunOnce

```go
func RunOnce(key string, f func() error) error
```

RunOnce ensures that a function identified by the given key is only executed the first time. Subequent calls will return a cached response.

<a name="SetWriter"></a>
## func SetWriter

```go
func SetWriter(w io.Writer)
```

SetWriter sets the output writer for console messages.

<a name="ToInterfaceSlice"></a>
## func ToInterfaceSlice

```go
func ToInterfaceSlice[T any](s []T) []interface{}
```

ToInterfaceSlice converts a typed slice to a slice of \`interface\{\}\`.

<a name="ToTypedSlice"></a>
## func ToTypedSlice

```go
func ToTypedSlice[T any](s []interface{}) []T
```

ToTypedSlice converts a slice of \`interface\{\}\` to a typed slice.

<a name="TruncateString"></a>
## func TruncateString

```go
func TruncateString(s string, n int) string
```

TruncateString truncates a string to the specified length \`n\`. If the string is shorter than or equal to \`n\`, it is returned unchanged.

<a name="TruncateStringE"></a>
## func TruncateStringE

```go
func TruncateStringE(s string, n int) string
```

TruncateStringE truncates a string to the specified length \`n\` and appends "..." if truncation occurs. If \`n\` is less than or equal to 3, the string is truncated without appending ellipses.

<a name="ValueOrDefault"></a>
## func ValueOrDefault

```go
func ValueOrDefault[T comparable](val T, def T) T
```

ValueOrDefault returns \`val\` if it is not the zero value of its type. Otherwise, it returns the provided default value \`def\`.

<a name="WriteBytesToFile"></a>
## func WriteBytesToFile

```go
func WriteBytesToFile(b []byte, path string) error
```

WriteBytesToFile writes bytes to a file at the given path. It creates any required directories as needed.

<a name="WriteStringToFile"></a>
## func WriteStringToFile

```go
func WriteStringToFile(s string, path string) error
```

WriteStringToFile writes a string to a file at the given path. It creates any required directories as needed.

<a name="Zero"></a>
## func Zero

```go
func Zero[T any]() T
```

Zero returns the zero value of any type \`T\`.

<a name="HttpClientFactory"></a>
## type HttpClientFactory

IHttpClientFactory defines an interface for creating new HTTP clients.

```go
type HttpClientFactory interface {
    NewClient() *http.Client
}
```

<a name="NewHttpClientFactory"></a>
### func NewHttpClientFactory

```go
func NewHttpClientFactory() HttpClientFactory
```



<a name="HttpClientFactoryImpl"></a>
## type HttpClientFactoryImpl

HttpClientFactory is a default implementation of IHttpClientFactory that creates standard HTTP clients.

```go
type HttpClientFactoryImpl struct{}
```

<a name="HttpClientFactoryImpl.NewClient"></a>
### func \(HttpClientFactoryImpl\) NewClient

```go
func (f HttpClientFactoryImpl) NewClient() *http.Client
```

NewClient creates and returns a new instance of an HTTP client.

<a name="HttpClientFactoryMock"></a>
## type HttpClientFactoryMock

HttpClientFactoryMock is a mock implementation of IHttpClientFactory for testing purposes. It uses a custom RoundTripFunc to handle HTTP requests.

```go
type HttpClientFactoryMock struct {
    Callback RoundTripFunc
}
```

<a name="HttpClientFactoryMock.NewClient"></a>
### func \(HttpClientFactoryMock\) NewClient

```go
func (f HttpClientFactoryMock) NewClient() *http.Client
```

NewClient creates and returns a new instance of an HTTP client with a custom transport that uses the provided RoundTripFunc.

<a name="RoundTripFunc"></a>
## type RoundTripFunc

RoundTripFunc defines a function type that processes HTTP requests and returns HTTP responses. It is used for mocking HTTP client behavior.

```go
type RoundTripFunc func(req *http.Request) *http.Response
```

<a name="RoundTripFunc.RoundTrip"></a>
### func \(RoundTripFunc\) RoundTrip

```go
func (f RoundTripFunc) RoundTrip(req *http.Request) (*http.Response, error)
```

RoundTrip executes the RoundTripFunc for the given HTTP request and returns the corresponding HTTP response.

<a name="RowStatus"></a>
## type RowStatus

RowStatus represents the status of a row in a table.

```go
type RowStatus string
```

# schema

```go
import "github.com/MetroStar/quartzctl/internal/config/schema"
```

Package schema defines all config types representing the processed quartz.yaml

## Index

- [func DefaultApplicationEnvironments\(\) map\[string\]ApplicationEnvironmentConfig](<#DefaultApplicationEnvironments>)
- [type AlertsConfig](<#AlertsConfig>)
- [type AlertsSubscriptionsConfig](<#AlertsSubscriptionsConfig>)
- [type ApplicationCallbackConfig](<#ApplicationCallbackConfig>)
- [type ApplicationDbConfig](<#ApplicationDbConfig>)
- [type ApplicationEnvironmentConfig](<#ApplicationEnvironmentConfig>)
  - [func NewApplicationEnvironmentConfig\(name string, desc string, next string\) ApplicationEnvironmentConfig](<#NewApplicationEnvironmentConfig>)
- [type ApplicationEnvironmentOtpConfig](<#ApplicationEnvironmentOtpConfig>)
- [type ApplicationLookupConfig](<#ApplicationLookupConfig>)
  - [func NewApplicationLookupConfig\(ns string, adminSecret string, adminUsername string, adminUsernameKey string, adminPasswordKey string, ingressName string\) ApplicationLookupConfig](<#NewApplicationLookupConfig>)
- [type ApplicationLookupCredentialsConfig](<#ApplicationLookupCredentialsConfig>)
- [type ApplicationLookupCredentialsSecretConfig](<#ApplicationLookupCredentialsSecretConfig>)
- [type ApplicationLookupIngressConfig](<#ApplicationLookupIngressConfig>)
- [type ApplicationRepositoryConfig](<#ApplicationRepositoryConfig>)
  - [func \(c ApplicationRepositoryConfig\) RepositoryConfig\(\) RepositoryConfig](<#ApplicationRepositoryConfig.RepositoryConfig>)
- [type AuthConfig](<#AuthConfig>)
  - [func DefaultAuthConfig\(\) AuthConfig](<#DefaultAuthConfig>)
- [type AuthGroupConfig](<#AuthGroupConfig>)
- [type AuthServiceAccountConfig](<#AuthServiceAccountConfig>)
- [type AuthUserConfig](<#AuthUserConfig>)
- [type AuthUserPasswordConfig](<#AuthUserPasswordConfig>)
- [type AwsConfig](<#AwsConfig>)
- [type ChartConfig](<#ChartConfig>)
- [type CloudflareCredentials](<#CloudflareCredentials>)
- [type DnsConfig](<#DnsConfig>)
- [type ExportConfig](<#ExportConfig>)
  - [func NewExportConfig\(\) ExportConfig](<#NewExportConfig>)
- [type ExportObjectConfig](<#ExportObjectConfig>)
- [type GithubConfig](<#GithubConfig>)
  - [func NewGithubConfig\(\) GithubConfig](<#NewGithubConfig>)
- [type GithubCredentials](<#GithubCredentials>)
- [type GithubWebhooks](<#GithubWebhooks>)
- [type GitopsConfig](<#GitopsConfig>)
  - [func DefaultGitopsConfig\(p string\) GitopsConfig](<#DefaultGitopsConfig>)
- [type InfrastructureApplicationConfig](<#InfrastructureApplicationConfig>)
- [type InfrastructureApplicationDbConfig](<#InfrastructureApplicationDbConfig>)
- [type InfrastructureEnvironmentConfig](<#InfrastructureEnvironmentConfig>)
  - [func NewInfrastructureEnvironmentConfig\(name string, desc string\) InfrastructureEnvironmentConfig](<#NewInfrastructureEnvironmentConfig>)
- [type InstallerConfig](<#InstallerConfig>)
- [type InstallerSummaryConfig](<#InstallerSummaryConfig>)
- [type InternalConfig](<#InternalConfig>)
  - [func NewInternalConfig\(\) InternalConfig](<#NewInternalConfig>)
- [type IronbankCredentials](<#IronbankCredentials>)
- [type Kubeconfig](<#Kubeconfig>)
- [type KubeconfigCluster](<#KubeconfigCluster>)
- [type KubeconfigClusterInfo](<#KubeconfigClusterInfo>)
- [type KubeconfigContext](<#KubeconfigContext>)
- [type KubeconfigContextInfo](<#KubeconfigContextInfo>)
- [type KubeconfigUser](<#KubeconfigUser>)
- [type KubeconfigUserExec](<#KubeconfigUserExec>)
- [type KubeconfigUserInfo](<#KubeconfigUserInfo>)
- [type KubernetesConfig](<#KubernetesConfig>)
- [type MirrorConfig](<#MirrorConfig>)
  - [func NewMirrorConfig\(\) MirrorConfig](<#NewMirrorConfig>)
- [type MirrorImageRepositoryConfig](<#MirrorImageRepositoryConfig>)
- [type ProvidersConfig](<#ProvidersConfig>)
  - [func NewProvidersConfig\(\) ProvidersConfig](<#NewProvidersConfig>)
- [type QuartzConfig](<#QuartzConfig>)
  - [func \(c QuartzConfig\) KubeconfigPath\(\) string](<#QuartzConfig.KubeconfigPath>)
  - [func \(c \*QuartzConfig\) StagesOrdered\(\) \[\]StageConfig](<#QuartzConfig.StagesOrdered>)
  - [func \(c QuartzConfig\) TfVarFilePath\(\) string](<#QuartzConfig.TfVarFilePath>)
- [type QuartzSecrets](<#QuartzSecrets>)
- [type RepositoryConfig](<#RepositoryConfig>)
- [type StageChecksConfig](<#StageChecksConfig>)
- [type StageChecksHttpConfig](<#StageChecksHttpConfig>)
- [type StageChecksHttpContentConfig](<#StageChecksHttpContentConfig>)
- [type StageChecksHttpJsonContentConfig](<#StageChecksHttpJsonContentConfig>)
- [type StageChecksKubernetesConfig](<#StageChecksKubernetesConfig>)
- [type StageChecksRetryConfig](<#StageChecksRetryConfig>)
- [type StageChecksStateConfig](<#StageChecksStateConfig>)
- [type StageConfig](<#StageConfig>)
- [type StageDebugConfig](<#StageDebugConfig>)
- [type StageDestroyConfig](<#StageDestroyConfig>)
- [type StageProvidersConfig](<#StageProvidersConfig>)
- [type StageVarsConfig](<#StageVarsConfig>)
- [type StageVarsStageConfig](<#StageVarsStageConfig>)
- [type StateConfig](<#StateConfig>)
  - [func NewStateConfig\(\) StateConfig](<#NewStateConfig>)
- [type TerraformConfig](<#TerraformConfig>)
  - [func NewTerraformConfig\(\) TerraformConfig](<#NewTerraformConfig>)


<a name="DefaultApplicationEnvironments"></a>
## func DefaultApplicationEnvironments

```go
func DefaultApplicationEnvironments() map[string]ApplicationEnvironmentConfig
```

DefaultApplicationEnvironments returns the default application environments.

<a name="AlertsConfig"></a>
## type AlertsConfig

AlertsConfig represents the configuration for alerts.

```go
type AlertsConfig struct {
    Subscriptions []AlertsSubscriptionsConfig `koanf:"subscriptions"` // A list of alert subscriptions.
}
```

<a name="AlertsSubscriptionsConfig"></a>
## type AlertsSubscriptionsConfig

AlertsSubscriptionsConfig represents the configuration for an individual alert subscription.

```go
type AlertsSubscriptionsConfig struct {
    Protocol string `koanf:"protocol"` // The protocol used for the subscription (e.g., "email", "sms").
    Endpoint string `koanf:"endpoint"` // The endpoint for the subscription (e.g., email address or phone number).
}
```

<a name="ApplicationCallbackConfig"></a>
## type ApplicationCallbackConfig

ApplicationCallbackConfig represents the callback configuration for an application.

```go
type ApplicationCallbackConfig struct {
    Url  string `koanf:"url"`
    Path string `koanf:"path"`
}
```

<a name="ApplicationDbConfig"></a>
## type ApplicationDbConfig

ApplicationDbConfig represents the database configuration for an application.

```go
type ApplicationDbConfig struct {
    Enabled  bool   `koanf:"enabled"`
    Admin    bool   `koanf:"admin"`
    Username string `koanf:"username"`
    DbName   string `koanf:"db_name"`
}
```

<a name="ApplicationEnvironmentConfig"></a>
## type ApplicationEnvironmentConfig

ApplicationEnvironmentConfig represents the configuration for an application environment.

```go
type ApplicationEnvironmentConfig struct {
    Name                string                          `koanf:"name"`
    Description         string                          `koanf:"description"`
    Next                string                          `koanf:"next"`
    Type                string                          `koanf:"type"`
    RegistrationAllowed bool                            `koanf:"registration_allowed"`
    CustomThemeEnabled  bool                            `koanf:"custom_theme_enabled"`
    Otp                 ApplicationEnvironmentOtpConfig `koanf:"otp"`
    Enabled             bool                            `koanf:"enabled"`
    Keycloak            map[string]interface{}          `koanf:"keycloak"`
}
```

<a name="NewApplicationEnvironmentConfig"></a>
### func NewApplicationEnvironmentConfig

```go
func NewApplicationEnvironmentConfig(name string, desc string, next string) ApplicationEnvironmentConfig
```

NewApplicationEnvironmentConfig creates a new ApplicationEnvironmentConfig with default values.

<a name="ApplicationEnvironmentOtpConfig"></a>
## type ApplicationEnvironmentOtpConfig



```go
type ApplicationEnvironmentOtpConfig struct {
    Enabled  bool `koanf:"enabled"`
    Required bool `koanf:"required"`
}
```

<a name="ApplicationLookupConfig"></a>
## type ApplicationLookupConfig

ApplicationLookupConfig represents the configuration for looking up application resources.

```go
type ApplicationLookupConfig struct {
    Enabled          bool                               `koanf:"enabled"`
    AdminCredentials ApplicationLookupCredentialsConfig `koanf:"admin_credentials"`
    Ingress          ApplicationLookupIngressConfig     `koanf:"ingress"`
}
```

<a name="NewApplicationLookupConfig"></a>
### func NewApplicationLookupConfig

```go
func NewApplicationLookupConfig(ns string, adminSecret string, adminUsername string, adminUsernameKey string, adminPasswordKey string, ingressName string) ApplicationLookupConfig
```



<a name="ApplicationLookupCredentialsConfig"></a>
## type ApplicationLookupCredentialsConfig



```go
type ApplicationLookupCredentialsConfig struct {
    Username string                                   `koanf:"username"`
    Secret   ApplicationLookupCredentialsSecretConfig `koanf:"secret"`
}
```

<a name="ApplicationLookupCredentialsSecretConfig"></a>
## type ApplicationLookupCredentialsSecretConfig



```go
type ApplicationLookupCredentialsSecretConfig struct {
    Name        string `koanf:"name"`
    Namespace   string `koanf:"namespace"`
    UsernameKey string `koanf:"username_key"`
    PasswordKey string `koanf:"password_key"`
}
```

<a name="ApplicationLookupIngressConfig"></a>
## type ApplicationLookupIngressConfig



```go
type ApplicationLookupIngressConfig struct {
    Name      string `koanf:"name"`
    Namespace string `koanf:"namespace"`
    Kind      string `koanf:"kind"`
    Group     string `koanf:"group"`
    Version   string `koanf:"version"`
}
```

<a name="ApplicationRepositoryConfig"></a>
## type ApplicationRepositoryConfig

ApplicationRepositoryConfig represents the configuration for an application repository.

```go
type ApplicationRepositoryConfig struct {
    Name         string                      `koanf:"repo"`
    RepoUrl      string                      `koanf:"repo_url"`
    Provider     string                      `koanf:"provider"`
    Organization string                      `koanf:"organization"`
    Branch       string                      `koanf:"branch"`
    Type         string                      `koanf:"type"`
    Db           ApplicationDbConfig         `koanf:"db"`
    BaseUrl      string                      `koanf:"base_url"`
    CallbackUrls []ApplicationCallbackConfig `koanf:"callback_urls"`
    Keycloak     map[string]interface{}      `koanf:"keycloak"`

    // Cloud specific and other schema-less settings for the app
    Settings map[string]interface{} `koanf:"settings"`
}
```

<a name="ApplicationRepositoryConfig.RepositoryConfig"></a>
### func \(ApplicationRepositoryConfig\) RepositoryConfig

```go
func (c ApplicationRepositoryConfig) RepositoryConfig() RepositoryConfig
```

RepositoryConfig converts an ApplicationRepositoryConfig to a RepositoryConfig.

<a name="AuthConfig"></a>
## type AuthConfig

AuthConfig represents the authentication configuration, including service accounts, users, and groups.

```go
type AuthConfig struct {
    ServiceAccount AuthServiceAccountConfig   `koanf:"service_account"` // Configuration for the service account.
    Users          map[string]AuthUserConfig  `koanf:"users"`           // Configuration for individual users.
    Groups         map[string]AuthGroupConfig `koanf:"groups"`          // Configuration for user groups.
}
```

<a name="DefaultAuthConfig"></a>
### func DefaultAuthConfig

```go
func DefaultAuthConfig() AuthConfig
```

DefaultAuthConfig returns the default authentication configuration.

<a name="AuthGroupConfig"></a>
## type AuthGroupConfig

AuthGroupConfig represents the configuration for a user group.

```go
type AuthGroupConfig struct {
    Disabled     bool     `koanf:"disabled"`     // Indicates if the group is disabled.
    Roles        []string `koanf:"roles"`        // The roles assigned to the group.
    Environments []string `koanf:"environments"` // The environments the group has access to.
}
```

<a name="AuthServiceAccountConfig"></a>
## type AuthServiceAccountConfig

AuthServiceAccountConfig represents the configuration for a Kubernetes service account.

```go
type AuthServiceAccountConfig struct {
    Enabled           bool   `koanf:"enabled"`            // Indicates if the service account is enabled.
    Name              string `koanf:"name"`               // The name of the service account.
    Namespace         string `koanf:"namespace"`          // The namespace of the service account.
    ExpirationSeconds int64  `koanf:"expiration_seconds"` // The expiration time for the service account token in seconds.
}
```

<a name="AuthUserConfig"></a>
## type AuthUserConfig

AuthUserConfig represents the configuration for an individual user.

```go
type AuthUserConfig struct {
    Disabled     bool                   `koanf:"disabled"`      // Indicates if the user is disabled.
    FirstName    string                 `koanf:"first_name"`    // The first name of the user.
    LastName     string                 `koanf:"last_name"`     // The last name of the user.
    EmailAddress string                 `koanf:"email_address"` // The email address of the user.
    Password     AuthUserPasswordConfig `koanf:"password"`      // The password configuration for the user.
    Groups       []string               `koanf:"groups"`        // The groups the user belongs to.
    Environments []string               `koanf:"environments"`  // The environments the user has access to.
    Test         bool                   `koanf:"test"`          // Indicates if the user is a test user.
    Count        int                    `koanf:"count"`         // The number of users to create (for bulk creation).
}
```

<a name="AuthUserPasswordConfig"></a>
## type AuthUserPasswordConfig

AuthUserPasswordConfig represents the configuration for a user's password.

```go
type AuthUserPasswordConfig struct {
    Temporary bool   `koanf:"temporary"` // Indicates if the password is temporary.
    Value     string `koanf:"value"`     // The value of the password.
}
```

<a name="AwsConfig"></a>
## type AwsConfig

AwsConfig represents the configuration for AWS in Quartz.

```go
type AwsConfig struct {
    Region string `koanf:"region"` // The AWS region to use.
}
```

<a name="ChartConfig"></a>
## type ChartConfig

ChartConfig represents the configuration for a Helm chart.

```go
type ChartConfig struct {
    Path string `koanf:"path"` // The path to the Helm chart.
}
```

<a name="CloudflareCredentials"></a>
## type CloudflareCredentials

CloudflareCredentials represents the credentials for accessing Cloudflare.

```go
type CloudflareCredentials struct {
    AccountId string `koanf:"account_id"` // The Cloudflare account ID.
    ApiToken  string `koanf:"api_token"`  // The API token for Cloudflare.
    Email     string `koanf:"email"`      // The email associated with the Cloudflare account.
}
```

<a name="DnsConfig"></a>
## type DnsConfig

DnsConfig represents the configuration for DNS in Quartz.

```go
type DnsConfig struct {
    Zone   string `koanf:"zone"`   // The DNS zone.
    Domain string `koanf:"domain"` // The DNS domain.
}
```

<a name="ExportConfig"></a>
## type ExportConfig

ExportConfig represents the configuration for exporting resources in Quartz.

```go
type ExportConfig struct {
    Path        string               `koanf:"path"`
    Annotations map[string]string    `koanf:"annotations"`
    Objects     []ExportObjectConfig `koanf:"objects"`
}
```

<a name="NewExportConfig"></a>
### func NewExportConfig

```go
func NewExportConfig() ExportConfig
```

NewExportConfig returns a new ExportConfig instance with default values.

<a name="ExportObjectConfig"></a>
## type ExportObjectConfig

ExportObjectConfig represents the configuration for an individual object to export.

```go
type ExportObjectConfig struct {
    Kind      string `koanf:"kind"`
    Name      string `koanf:"name"`
    Namespace string `koanf:"namespace"`
}
```

<a name="GithubConfig"></a>
## type GithubConfig

GithubConfig represents the configuration for GitHub integration.

```go
type GithubConfig struct {
    TagReleaseEnabled bool           `koanf:"tag_release"`
    Webhooks          GithubWebhooks `koanf:"webhooks"`
    Organization      string         `koanf:"organization"`
}
```

<a name="NewGithubConfig"></a>
### func NewGithubConfig

```go
func NewGithubConfig() GithubConfig
```

NewGithubConfig returns a new GithubConfig instance with default values.

<a name="GithubCredentials"></a>
## type GithubCredentials

GithubCredentials represents the credentials for accessing GitHub.

```go
type GithubCredentials struct {
    Username string `koanf:"username"`
    Token    string `koanf:"token"`
}
```

<a name="GithubWebhooks"></a>
## type GithubWebhooks

GithubWebhooks represents the configuration for GitHub webhooks.

```go
type GithubWebhooks struct {
    Build   bool `koanf:"build"`
    Release bool `koanf:"release"`
}
```

<a name="GitopsConfig"></a>
## type GitopsConfig

GitopsConfig represents the configuration for GitOps in Quartz.

```go
type GitopsConfig struct {
    Core RepositoryConfig `koanf:"core"`
    Apps RepositoryConfig `koanf:"apps"`
}
```

<a name="DefaultGitopsConfig"></a>
### func DefaultGitopsConfig

```go
func DefaultGitopsConfig(p string) GitopsConfig
```

DefaultGitopsConfig returns a new GitopsConfig instance with default values.

<a name="InfrastructureApplicationConfig"></a>
## type InfrastructureApplicationConfig

InfrastructureApplicationConfig represents the configuration for an infrastructure application.

```go
type InfrastructureApplicationConfig struct {
    Disabled                   bool                              `koanf:"disabled"`
    Description                string                            `koanf:"description"`
    BaseUrl                    string                            `koanf:"base_url"`
    CallbackUrls               []ApplicationCallbackConfig       `koanf:"callback_urls"`
    Db                         InfrastructureApplicationDbConfig `koanf:"db"`
    DefaultPath                string                            `koanf:"default_path"`
    Scopes                     []string                          `koanf:"scopes"`
    AccessTokenLifespanSeconds int                               `koanf:"access_token_lifespan_seconds"`
    Keycloak                   map[string]interface{}            `koanf:"keycloak"`
    Lookup                     ApplicationLookupConfig           `koanf:"lookup"`
}
```

<a name="InfrastructureApplicationDbConfig"></a>
## type InfrastructureApplicationDbConfig



```go
type InfrastructureApplicationDbConfig struct {
    Enabled  bool   `koanf:"enabled"`
    Admin    bool   `koanf:"admin"`
    Username string `koanf:"username"`
    DbName   string `koanf:"db_name"`
}
```

<a name="InfrastructureEnvironmentConfig"></a>
## type InfrastructureEnvironmentConfig

InfrastructureEnvironmentConfig represents the configuration for an infrastructure environment.

```go
type InfrastructureEnvironmentConfig struct {
    Name                string                                     `koanf:"name"`
    Description         string                                     `koanf:"description"`
    Type                string                                     `koanf:"type"`
    RegistrationAllowed bool                                       `koanf:"registration_allowed"`
    CustomThemeEnabled  bool                                       `koanf:"custom_theme_enabled"`
    Otp                 ApplicationEnvironmentOtpConfig            `koanf:"otp"`
    Applications        map[string]InfrastructureApplicationConfig `koanf:"applications"`
}
```

<a name="NewInfrastructureEnvironmentConfig"></a>
### func NewInfrastructureEnvironmentConfig

```go
func NewInfrastructureEnvironmentConfig(name string, desc string) InfrastructureEnvironmentConfig
```

NewInfrastructureEnvironmentConfig creates a new InfrastructureEnvironmentConfig with default values.

<a name="InstallerConfig"></a>
## type InstallerConfig

InstallerConfig represents the configuration for the installer.

```go
type InstallerConfig struct {
    Summary InstallerSummaryConfig `koanf:"summary"`
}
```

<a name="InstallerSummaryConfig"></a>
## type InstallerSummaryConfig

InstallerSummaryConfig represents the configuration for the installer summary.

```go
type InstallerSummaryConfig struct {
    Enabled bool `koanf:"enabled"`
}
```

<a name="InternalConfig"></a>
## type InternalConfig

InternalConfig exposes options to customize features not yet or ever intended for common usage.

```go
type InternalConfig struct {
    Installer InstallerConfig `koanf:"installer"`
}
```

<a name="NewInternalConfig"></a>
### func NewInternalConfig

```go
func NewInternalConfig() InternalConfig
```

NewInternalConfig returns a new InternalConfig instance with default values.

<a name="IronbankCredentials"></a>
## type IronbankCredentials

IronbankCredentials represents the credentials for accessing Ironbank.

```go
type IronbankCredentials struct {
    Username string `koanf:"username"`
    Password string `koanf:"password"`
    Email    string `koanf:"email"`
}
```

<a name="Kubeconfig"></a>
## type Kubeconfig

Kubeconfig represents the structure of a Kubernetes kubeconfig file.

```go
type Kubeconfig struct {
    ApiVersion     string              `koanf:"apiVersion"`
    Kind           string              `koanf:"kind"`
    CurrentContext string              `koanf:"current-context"`
    Preferences    interface{}         `koanf:"preferences"`
    Clusters       []KubeconfigCluster `koanf:"clusters"`
    Contexts       []KubeconfigContext `koanf:"contexts"`
    Users          []KubeconfigUser    `koanf:"users"`
}
```

<a name="KubeconfigCluster"></a>
## type KubeconfigCluster

KubeconfigCluster represents a cluster entry in a kubeconfig file.

```go
type KubeconfigCluster struct {
    Name    string                `koanf:"name"`
    Cluster KubeconfigClusterInfo `koanf:"cluster"`
}
```

<a name="KubeconfigClusterInfo"></a>
## type KubeconfigClusterInfo



```go
type KubeconfigClusterInfo struct {
    Server                   string `koanf:"server"`
    CertificateAuthorityData string `koanf:"certificate-authority-data"`
}
```

<a name="KubeconfigContext"></a>
## type KubeconfigContext

KubeconfigContext represents a context entry in a kubeconfig file.

```go
type KubeconfigContext struct {
    Name    string                `koanf:"name"`
    Context KubeconfigContextInfo `koanf:"context"`
}
```

<a name="KubeconfigContextInfo"></a>
## type KubeconfigContextInfo



```go
type KubeconfigContextInfo struct {
    Cluster string `koanf:"cluster"`
    User    string `koanf:"user"`
}
```

<a name="KubeconfigUser"></a>
## type KubeconfigUser

KubeconfigUser represents a user entry in a kubeconfig file.

```go
type KubeconfigUser struct {
    Name string             `koanf:"name"`
    User KubeconfigUserInfo `koanf:"user"`
}
```

<a name="KubeconfigUserExec"></a>
## type KubeconfigUserExec



```go
type KubeconfigUserExec struct {
    ApiVersion string   `koanf:"apiVersion"`
    Command    string   `koanf:"command"`
    Args       []string `koanf:"args"`
}
```

<a name="KubeconfigUserInfo"></a>
## type KubeconfigUserInfo



```go
type KubeconfigUserInfo struct {
    Token *string             `koanf:"token"`
    Exec  *KubeconfigUserExec `koanf:"exec"`
}
```

<a name="KubernetesConfig"></a>
## type KubernetesConfig

KubernetesConfig represents the configuration for Kubernetes.

```go
type KubernetesConfig struct {
    Version        string `koanf:"version"`
    KubeconfigPath string `koanf:"kubeconfig_path"`
}
```

<a name="MirrorConfig"></a>
## type MirrorConfig

MirrorConfig represents the configuration for mirroring resources in Quartz.

```go
type MirrorConfig struct {
    ImageRepository MirrorImageRepositoryConfig `koanf:"image_repository"`
    Grype           bool                        `koanf:"grype"`
}
```

<a name="NewMirrorConfig"></a>
### func NewMirrorConfig

```go
func NewMirrorConfig() MirrorConfig
```

NewMirrorConfig returns a new MirrorConfig instance with default values.

<a name="MirrorImageRepositoryConfig"></a>
## type MirrorImageRepositoryConfig

MirrorImageRepositoryConfig represents the configuration for mirroring image repositories.

```go
type MirrorImageRepositoryConfig struct {
    Enabled          bool     `koanf:"enabled"`
    Target           string   `koanf:"target"`
    SourceRegistries []string `koanf:"source_registries"`
}
```

<a name="ProvidersConfig"></a>
## type ProvidersConfig

ProvidersConfig represents the configuration for various providers used in Quartz.

```go
type ProvidersConfig struct {
    Cloud         string `koanf:"cloud"`
    Dns           string `koanf:"dns"`
    SourceControl string `koanf:"source_control"`
    Monitoring    string `koanf:"monitoring"`
    Secrets       string `koanf:"secrets"`
    Oidc          string `koanf:"oidc"`
    CiCd          string `koanf:"cicd"`
}
```

<a name="NewProvidersConfig"></a>
### func NewProvidersConfig

```go
func NewProvidersConfig() ProvidersConfig
```

NewProvidersConfig returns a new ProvidersConfig instance with default values.

<a name="QuartzConfig"></a>
## type QuartzConfig

QuartzConfig represents the root configuration struct of the Quartz framework.

```go
type QuartzConfig struct {
    Name    string `koanf:"name"`
    Project string `koanf:"project"`

    Tmp   string      `koanf:"tmp"`
    Chart ChartConfig `koanf:"chart"`

    Providers ProvidersConfig `koanf:"providers"`
    Auth      AuthConfig      `koanf:"auth"`
    Dns       DnsConfig       `koanf:"dns"`

    Aws    AwsConfig    `koanf:"aws"`
    Github GithubConfig `koanf:"github"`

    Core         InfrastructureEnvironmentConfig         `koanf:"core"`
    Environments map[string]ApplicationEnvironmentConfig `koanf:"environments"`
    Alerts       AlertsConfig                            `koanf:"alerts"`

    Kubernetes KubernetesConfig `koanf:"kubernetes"`
    Terraform  TerraformConfig  `koanf:"terraform"`

    StagePaths []string               `koanf:"stage_paths"`
    Stages     map[string]StageConfig `koanf:"stages"`

    Administrators []string                               `koanf:"administrators"`
    Gitops         GitopsConfig                           `koanf:"gitops"`
    Applications   map[string]ApplicationRepositoryConfig `koanf:"applications"`
    Mirror         MirrorConfig                           `koanf:"mirror"`

    Export ExportConfig `koanf:"export"`
    State  StateConfig  `koanf:"state"`

    Log log.LogOptionsConfig `koanf:"log"`

    Internal InternalConfig `koanf:"__internal__"`
}
```

<a name="QuartzConfig.KubeconfigPath"></a>
### func \(QuartzConfig\) KubeconfigPath

```go
func (c QuartzConfig) KubeconfigPath() string
```

KubeconfigPath derives the expected kubeconfig path based on optional overrides in QuartzConfig.

<a name="QuartzConfig.StagesOrdered"></a>
### func \(\*QuartzConfig\) StagesOrdered

```go
func (c *QuartzConfig) StagesOrdered() []StageConfig
```

StagesOrdered sorts the configured stages map and returns an ordered slice.

<a name="QuartzConfig.TfVarFilePath"></a>
### func \(QuartzConfig\) TfVarFilePath

```go
func (c QuartzConfig) TfVarFilePath() string
```

TfVarFilePath derives the expected Terraform tfvars path based on optional overrides in QuartzConfig.

<a name="QuartzSecrets"></a>
## type QuartzSecrets

QuartzSecrets contains credentials intended to be kept isolated from the QuartzConfig to avoid unintentional exposure when serialized/logged.

```go
type QuartzSecrets struct {
    Ironbank   IronbankCredentials   `koanf:"ironbank"`
    Github     GithubCredentials     `koanf:"github"`
    Cloudflare CloudflareCredentials `koanf:"cloudflare"`
}
```

<a name="RepositoryConfig"></a>
## type RepositoryConfig

RepositoryConfig represents the configuration for a repository.

```go
type RepositoryConfig struct {
    Name         string `koanf:"repo"`
    RepoUrl      string `koanf:"repo_url"`
    Provider     string `koanf:"provider"`
    Organization string `koanf:"organization"`
    Branch       string `koanf:"branch"`
}
```

<a name="StageChecksConfig"></a>
## type StageChecksConfig

StageChecksConfig represents the configuration for checks associated with a stage.

```go
type StageChecksConfig struct {
    Before     []string                      `koanf:"before"`
    After      []string                      `koanf:"after"`
    Http       []StageChecksHttpConfig       `koanf:"http"`
    Kubernetes []StageChecksKubernetesConfig `koanf:"kubernetes"`
    State      []StageChecksStateConfig      `koanf:"state"`
    Order      int                           `koanf:"order"`
}
```

<a name="StageChecksHttpConfig"></a>
## type StageChecksHttpConfig

StageChecksHttpConfig represents the configuration for HTTP\-based checks in a stage.

```go
type StageChecksHttpConfig struct {
    Url         string                       `koanf:"url"`
    Path        string                       `koanf:"path"`
    App         string                       `koanf:"app"`
    StatusCodes []int                        `koanf:"status_codes"`
    Content     StageChecksHttpContentConfig `koanf:"content"`
    Verify      bool                         `koanf:"verify"`
    Retry       StageChecksRetryConfig       `koanf:"retry"`
}
```

<a name="StageChecksHttpContentConfig"></a>
## type StageChecksHttpContentConfig

StageChecksHttpContentConfig represents the configuration for HTTP content checks.

```go
type StageChecksHttpContentConfig struct {
    Json  StageChecksHttpJsonContentConfig `koanf:"json"`
    Value string                           `koanf:"value"`
}
```

<a name="StageChecksHttpJsonContentConfig"></a>
## type StageChecksHttpJsonContentConfig

StageChecksHttpJsonContentConfig represents the configuration for JSON content checks.

```go
type StageChecksHttpJsonContentConfig struct {
    // TODO: add jsonpath support
    Key string `koanf:"key"`
}
```

<a name="StageChecksKubernetesConfig"></a>
## type StageChecksKubernetesConfig

StageChecksKubernetesConfig represents the configuration for Kubernetes\-based checks in a stage.

```go
type StageChecksKubernetesConfig struct {
    Name      string `koanf:"name"`
    Namespace string `koanf:"namespace"`
    Kind      string `koanf:"kind"`
    State     string `koanf:"state"`
    Timeout   int    `koanf:"timeout"`
    Restart   bool   `koanf:"restart"`
    Wait      *bool  `koanf:"wait"`
}
```

<a name="StageChecksRetryConfig"></a>
## type StageChecksRetryConfig

StageChecksRetryConfig represents the retry configuration for stage checks.

```go
type StageChecksRetryConfig struct {
    Limit       int `koanf:"limit"`
    WaitSeconds int `koanf:"wait_seconds"`
}
```

<a name="StageChecksStateConfig"></a>
## type StageChecksStateConfig

StageChecksStateConfig represents the configuration for state\-based checks in a stage.

```go
type StageChecksStateConfig struct {
    Key   string                 `koanf:"key"`
    Value string                 `koanf:"value"`
    Retry StageChecksRetryConfig `koanf:"retry"`
}
```

<a name="StageConfig"></a>
## type StageConfig

StageConfig represents the configuration for a single stage in the Quartz pipeline. It includes details such as dependencies, variables, and checks.

```go
type StageConfig struct {
    Id           string                       `koanf:"id"`
    Description  string                       `koanf:"description"`
    Path         string                       `koanf:"path"`
    Type         string                       `koanf:"type"`         // terraform, other
    Dependencies []string                     `koanf:"dependencies"` // slice of stages that have to run before
    Disabled     bool                         `koanf:"disabled"`
    Manual       bool                         `koanf:"manual"`
    Order        int                          `koanf:"order"`
    Providers    StageProvidersConfig         `koanf:"providers"`
    OverrideVars bool                         `koanf:"override_vars"`
    Vars         map[string]StageVarsConfig   `koanf:"vars"`
    Checks       map[string]StageChecksConfig `koanf:"checks"`
    Destroy      StageDestroyConfig           `koanf:"destroy"`
    Debug        StageDebugConfig             `koanf:"debug"`
}
```

<a name="StageDebugConfig"></a>
## type StageDebugConfig

StageDebugConfig represents the debug configuration for a stage.

```go
type StageDebugConfig struct {
    Break bool `koanf:"break"`
}
```

<a name="StageDestroyConfig"></a>
## type StageDestroyConfig

StageDestroyConfig represents the configuration for destroying resources in a stage.

```go
type StageDestroyConfig struct {
    Skip    bool     `koanf:"skip"`
    Include []string `koanf:"include"`
    Exclude []string `koanf:"exclude"`
}
```

<a name="StageProvidersConfig"></a>
## type StageProvidersConfig

StageProvidersConfig represents the configuration for providers used in a stage.

```go
type StageProvidersConfig struct {
    Kubernetes bool `koanf:"kubernetes"`
}
```

<a name="StageVarsConfig"></a>
## type StageVarsConfig

StageVarsConfig represents the configuration for input variables for a stage.

```go
type StageVarsConfig struct {
    Value  string               `koanf:"value"`
    Stage  StageVarsStageConfig `koanf:"stage"`
    Env    string               `koanf:"env"`
    Config string               `koanf:"config"`
    Secret string               `koanf:"secret"`
}
```

<a name="StageVarsStageConfig"></a>
## type StageVarsStageConfig

StageVarsStageConfig represents the configuration for a variable stage.

```go
type StageVarsStageConfig struct {
    Name   string `koanf:"name"`
    Output string `koanf:"output"`
}
```

<a name="StateConfig"></a>
## type StateConfig

StateConfig represents the configuration for state management in Quartz.

```go
type StateConfig struct {
    Enabled            bool   `koanf:"enabled"`            // Indicates if state management is enabled.
    ConfigMapName      string `koanf:"configMapName"`      // The name of the ConfigMap used for state management.
    ConfigMapNamespace string `koanf:"configMapNamespace"` // The namespace of the ConfigMap used for state management.
}
```

<a name="NewStateConfig"></a>
### func NewStateConfig

```go
func NewStateConfig() StateConfig
```

NewStateConfig returns a new StateConfig instance with default values.

<a name="TerraformConfig"></a>
## type TerraformConfig

TerraformConfig represents the configuration for Terraform.

```go
type TerraformConfig struct {
    Version string `koanf:"version"` // The version of Terraform to use.
}
```

<a name="NewTerraformConfig"></a>
### func NewTerraformConfig

```go
func NewTerraformConfig() TerraformConfig
```

NewTerraformConfig returns a new TerraformConfig instance with default values.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->
